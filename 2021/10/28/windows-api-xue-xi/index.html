<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Windows API学习, 每天都要努力哇">
    <meta name="description" content="分享者才是学习中最大的受益者！">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Windows API学习 | 每天都要努力哇</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="每天都要努力哇" type="application/atom+xml">
</head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">每天都要努力哇</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">每天都要努力哇</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/Redamancy404/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/Redamancy404/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/23.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Windows API学习</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Windows-API%E5%AD%A6%E4%B9%A0/">
                                <span class="chip bg-color">Windows API学习</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Windows-API/" class="post-category">
                                Windows API
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-10-28
                </div>
                

                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    5.5k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    20 分
                </div>
                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <pre class="line-numbers language-none"><code class="language-none">XP:Windows NT5.1

WIN7:Windows NT6.1

WIN8:WindowsNT6.2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Windows API 是Windows操作系统提供给应用程序的大量函数，开发程序调用这些接口，可以搭建各种各样不同的程序</p>
<h2 id="Windows-API结构"><a href="#Windows-API结构" class="headerlink" title="Windows API结构"></a>Windows API结构</h2><p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110659.png" alt="image-20211109191615483"></p>
<h2 id="Windows-API数据类型"><a href="#Windows-API数据类型" class="headerlink" title="Windows API数据类型"></a>Windows API数据类型</h2><p>Windows API的数据类型是不同于C或者C++的数据类型的 ，它有一套属于自己的数据类型。</p>
<p>同时，这两者之前又有一些关系。比如，部分数据类型是由标准C当中重定义而来，而有些是Windows 特有的。</p>
<p>  其中，自定义规则遵循如下情况：</p>
<ol>
<li>基本类型大写：即char 类型 改变为CHAR</li>
<li>指针类型在其指向数据类型前添加<code>LP</code>或<code>P</code>即：DWORD的指针类型为<code>LPDWORD</code>和<code>PDWORD</code></li>
<li>句柄类型命名方式一般在对象前添加<code>H</code></li>
<li>无符号类型一般是以<code>U</code>开头，即：<code>INT</code>是符号类型，<code>UINT</code>则是无符号类型</li>
</ol>
<p>控制台应用</p>
<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110661.png" alt="image-20211030010746839"></p>
<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110662.png" alt="image-20211030010927880"></p>
<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110663.png" alt="image-20211030011127891"></p>
<p>C语言中的宽字符</p>
<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110664.png" alt="image-20211030011833710"></p>
<h2 id="另一种形式"><a href="#另一种形式" class="headerlink" title="另一种形式"></a>另一种形式</h2><p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110665.png" alt="image-20211030012042243"></p>
<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110666.png" alt="image-20211030013338814"></p>
<p>丰富窗口个性化特征</p>
<pre class="line-numbers language-none"><code class="language-none">CreateWindow<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>





<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110667.png" alt="image-20211030014530218"></p>
<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110668.png" alt="image-20211030014934817"></p>
<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110669.png" alt="image-20211030015143801"></p>
<h2 id="窗口的诞生流程"><a href="#窗口的诞生流程" class="headerlink" title="窗口的诞生流程"></a>窗口的诞生流程</h2><p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110670.png" alt="image-20211030145050676"></p>
<h3 id="WNDCLASS-结构"><a href="#WNDCLASS-结构" class="headerlink" title="WNDCLASS 结构"></a>WNDCLASS 结构</h3><h4 id="前言-1"><a href="#前言-1" class="headerlink" title="前言"></a>前言</h4><p> Windows 的窗口总是基于窗口类来创建的，窗口类同时确定了处理窗口消息的窗口过程（回调函数）</p>
<p> 在创建应用程序窗口之前，必须调用 RegisterClass 函数来注册窗口类。该函数只需要一个参数，即指向 WNDCLASS 窗口类的指针。</p>
<p>因为 WNDCLASS 类包含了窗口所拥有的基本属性。</p>
<h4 id="结构原型"><a href="#结构原型" class="headerlink" title="结构原型"></a>结构原型</h4><pre class="line-numbers language-none"><code class="language-none">typedef struct tagWNDCLASSW {
UINT        style;                 //指定窗口类型，有各种类风格可以使用按位或操作符组合起来
WNDPROC     lpfnWndProc;           //指定窗口过程（必须是回调函数）
int         cbClsExtra;            //预留的额外空间，一般为 0
int         cbWndExtra;            //预留的额外空间，一般为 0
HINSTANCE   hInstance;             //应用程序的实例句柄
HICON       hIcon;                 //为所有基于该窗口类的窗口设定一个图标
HCURSOR     hCursor;               //为所有基于该窗口类的窗口设定一个鼠标指针
HBRUSH      hbrBackground;         //指定窗口背景色
LPCWSTR     lpszMenuName;         //指定窗口菜单
LPCWSTR     lpszClassName;        //指定窗口类名
} WNDCLASSW, *PWNDCLASSW, NEAR *NPWNDCLASSW, FAR *LPWNDCLASSW;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="style-类风格"><a href="#style-类风格" class="headerlink" title="style 类风格"></a>style 类风格</h4><table>
<thead>
<tr>
<th>CS_VREDRAW</th>
<th>移动或者调整窗口的高度（垂直方向）时，重绘整个窗口</th>
</tr>
</thead>
<tbody><tr>
<td>CS_HREDRAW</td>
<td>移动或者调整窗口的宽度（水平方向）时，重绘整个窗口</td>
</tr>
<tr>
<td>CS_DBLCLKS</td>
<td>当用户光标在窗口内双击时，允许发送双击消息给窗口过程</td>
</tr>
<tr>
<td>CS_OWNDC</td>
<td>给予每个窗口实例分配一个唯一的 DC（注意，尽管这样是很方便，但它必须慎重使用，因为每个 DC 大约要占 800 个字节的内存）</td>
</tr>
<tr>
<td>CS_CLASSDC</td>
<td>该窗口类的所有窗口实例都共享一个窗口类 DC</td>
</tr>
<tr>
<td>CS_PARENTDC</td>
<td>1. 将子窗口的裁剪区域设置到父窗口的 DC 中去，这样子窗口便可以在父窗口上绘制自身。（注意，这是子窗口从系统缓存中获取 DC，而不是使用父窗口的 DC。）  2. 指定该风格可以提高系统性能</td>
</tr>
<tr>
<td>CS_NOCLOSE</td>
<td>禁止系统菜单的关闭选项</td>
</tr>
<tr>
<td>CS_SAVEBITS</td>
<td>1. 以位图形式保存被该窗口遮挡的屏幕部分，当给窗口移动以后，系统便可以用该保存的位图恢复屏幕移动的相应部分，从而系统不用向被该窗口遮挡的窗口发送 WM_PAINT 消息  2. 该特性对于菜单类型的窗口比较合适，因为它通常是简短的显示一下之后便消失  3. 设置该特性将增加显示该窗口的时间，因为它通常要先分配保存位图的内存</td>
</tr>
<tr>
<td>CS_BYTEALIGNCLIENT</td>
<td>在字节边界上（在 x 方向上）定位窗口的用户区域的位置</td>
</tr>
<tr>
<td>CS_BYTEALIGNWINDOW</td>
<td>在字节边界上（在 x 方向上）定位窗口的位置</td>
</tr>
<tr>
<td>CS_GLOBALCLASS</td>
<td>1. 当调用 CreateWindow 或 CreateWindowEx 函数来创建窗口时允许它的 hInstance 参数和注册窗口类时传递给 RegisterClass 的 hInstance 参数不同  2. 如果不指定该风格，则这两个 hInstance 必须相同</td>
</tr>
</tbody></table>
<h3 id="CreateWindow"><a href="#CreateWindow" class="headerlink" title="CreateWindow"></a>CreateWindow</h3><h4 id="前言-2"><a href="#前言-2" class="headerlink" title="前言"></a>前言</h4><p>CreateWindow 函数创建一个重叠式窗口、弹出式窗口或子窗口。它指定窗口类，窗口标题，窗口风格，以及窗口的初始位置及大小（可选的）。函数也指该窗口的父窗口或所属窗口（如果存在的话），及窗口的菜单。</p>
<p> 若要使用除 CreateWindow 函数支持的风格外的扩展风格，则使用 CreateWindowEx 函数代替 CreateWindow 函数。</p>
<h4 id="API原型"><a href="#API原型" class="headerlink" title="API原型"></a>API原型</h4><p>注：<code>_In_ </code>说明该参数是输入的，<code>_opt_ </code>说明该参数是可选参数</p>
<pre class="line-numbers language-none"><code class="language-none">HWND WINAPI CreateWindow(
_In_opt_  LPCTSTR lpClassName,    // 窗口类名称
_In_opt_  LPCTSTR lpWindowName,   // 窗口标题
_In_      DWORD dwStyle,          // 窗口风格，或称窗口格式
_In_      int x,                  // 初始 x 坐标
_In_      int y,                  // 初始 y 坐标
_In_      int nWidth,             // 初始 x 方向尺寸
_In_      int nHeight,            // 初始 y 方向尺寸
_In_opt_  HWND hWndParent,        // 父窗口句柄
_In_opt_  HMENU hMenu,            // 窗口菜单句柄
_In_opt_  HINSTANCE hInstance,    // 程序实例句柄
_In_opt_  LPVOID lpParam          // 创建参数
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>核心元素：<code>IpParam</code>–&gt;用来<code>绑定</code>注册窗口类的指针</p>
<h4 id="具体参数解析"><a href="#具体参数解析" class="headerlink" title="具体参数解析"></a>具体参数解析</h4><table>
<thead>
<tr>
<th><strong>参数</strong></th>
<th><strong>含义</strong></th>
</tr>
</thead>
<tbody><tr>
<td>lpClassName</td>
<td>1. 窗口类名称，可以是一个指向 NULL 结束的字符串或一个整型数值  2. 如果是字符串，它指定了窗口的类名。这个类名可以是任何用函数 RegisterClass 注册的类名，或是任何预定义的控制类名  3. 如是一个整型量，它是由此前调用 theGlobalAddAtom 函数产生的全局量。这个小于 0xC000 的 16 位数必须是 lpClassName 参数字的低 16 位，该参数的高位必须是 0</td>
</tr>
<tr>
<td>lpWindowName</td>
<td>1. 窗口标题，一个指向 NULL 结束的字符串指针  2. 如果窗口风格指定了标题条，由 lpWindowName 指向的窗口标题将显示在标题条上  3. 当使用 Createwindow 函数来创建控制例如按钮，选择框和静态控制时，可使用 lpWindowName 来指定控制文本</td>
</tr>
<tr>
<td>dwStyle</td>
<td>指定创建窗口的风格（详见下方↓）</td>
</tr>
<tr>
<td>x</td>
<td>1. 指定窗口的初始水平位置（x 坐标）  2. 对一个层叠或弹出式窗口，x 参数是屏幕坐标系的窗口的左上角的初始 x 坐标  3. 对于子窗口，x 是子窗口左上角相对父窗口客户区左上角的初始 x 坐标  4. 如果该参数被设为 CW_USEDEFAULT 则系统为窗口选择缺省的左上角坐标并忽略 y 参数，CW_USEDEFAULT 只对层叠窗口有效，如果为弹出式窗口或子窗口设定，则 x 和 y 参数被设为零。</td>
</tr>
<tr>
<td>y</td>
<td>1. 指定窗口的初始垂直位置（y 坐标）  2. 对一个层叠或弹出式窗口，y 参数是屏幕坐标系的窗口的左上角的初始 y 坐标  3. 对于子窗口，y 是子窗口左上角相对父窗口客户区左上角的初始 y 坐标  4. 对于列表框，y 是列表框客户区左上角相对父窗口客户区左上角的初始 y 坐标  5. 如果层叠窗口是使用 WS_VISIBLE 风格位创建的并且 x 参数被设为 CW_USEDEFAULT，则系统将忽略 y 参数</td>
</tr>
<tr>
<td>nWidth</td>
<td>1. 以设备单元指明窗口的宽度  2. 对于层叠窗口，nWidth 的值或是屏幕坐标的窗口宽度或是 CW_USEDEFAULT  3. 若 nWidth 是 CW_USEDEFAULT，则系统为窗口选择一个默认的高度和宽度（默认宽度为从初始 x  坐标开始到屏幕的右边界，缺省高度为从初始 y 坐标开始到目标区域的顶部。)，CW_USEDEFAULT  只对层叠窗口有效，如果为弹出式窗口和子窗口设定 CW_USEDEFAULT 标志则 nWidth 和 nHeight 被设为零</td>
</tr>
<tr>
<td>nHeight</td>
<td>1. 以设备单元指明窗口的高度  2. 对于层叠窗口，nHeight 是屏幕坐标的窗口宽度  3. 若 nWidth 被设为 CW_USEDEFAULT，则系统忽略 nHeight 参数，自动为 nWidth 和 nHeight 设置默认参数</td>
</tr>
<tr>
<td>hWndParent</td>
<td>1. 指向被创建窗口的父窗口或所有者窗口的句柄  2. 若要创建一个子窗口或一个从属窗口，需提供一个有效的窗口句柄  3. 创建一个单纯的消息窗口，可以提供 HWND_MESSAGE 或提供一个己存在的消息窗口的句柄</td>
</tr>
<tr>
<td>hMenu</td>
<td>1. 指向窗口菜单句柄，或依据窗口风格指明一个子窗口标识  2. 对于层叠或弹出式窗口，hMenu 指定窗口使用的菜单：如果使用了菜单类，则 hMenu 可以为 NULL  3. 对于子窗口，hMenu 指定了该子窗口标识（一个整型量），一个对话框使用这个整型值将事件通知父类。应用程序确定子窗口标识，这个值对于相同父窗口的所有子窗口必须是唯一的</td>
</tr>
<tr>
<td>hInstance</td>
<td>与窗口相关联的模块实例的句柄</td>
</tr>
<tr>
<td>lpParam</td>
<td>1. 指向一个值的指针，该值传递给窗口 WM_CREATE 消息。该值通过在 lParam 参数中的 CREATESTRUCT 结构传递  2. 如果应用程序调用 CreateWindow 创建一个 MDI 客户窗口，则 lpParam 必须指向一个 CLIENTCREATESTRUCT 结构</td>
</tr>
</tbody></table>
<h4 id="dwStyle-窗口风格解析"><a href="#dwStyle-窗口风格解析" class="headerlink" title="dwStyle 窗口风格解析"></a>dwStyle 窗口风格解析</h4><table>
<thead>
<tr>
<th><strong>窗口风格</strong></th>
<th><strong>含义</strong></th>
</tr>
</thead>
<tbody><tr>
<td>WS_BORDER</td>
<td>创建一个带边框的窗口</td>
</tr>
<tr>
<td>WS_CAPTION</td>
<td>创建一个有标题框的窗口（包含了 WS_BODER 风格）</td>
</tr>
<tr>
<td>WS_CHILD</td>
<td>创建一个子窗口，这个风格的窗口不能拥有菜单也不能与 WS_POPUP 风格合用</td>
</tr>
<tr>
<td>WS_CHILDWINDOW</td>
<td>与 WS_CHILD 相同</td>
</tr>
<tr>
<td>WS_CLIPCHILDREN</td>
<td>当在父窗口内绘图时，排除子窗口区域，在创建父窗口时使用这个风格</td>
</tr>
<tr>
<td>WS_CLIPSIBLINGS</td>
<td>1. 排除子窗口之间的相对区域，也就是，当一个特定的窗口接收到 WM_PAINT 消息时，WS_CLIPSIBLINGS 风格将所有层叠窗口排除在绘图之外，只重绘指定的子窗口  2. 如果未指定该风格，并且子窗口是层叠的，则在重绘子窗口的客户区时，就会重绘邻近的子窗口</td>
</tr>
<tr>
<td>WS_DISABLED</td>
<td>1. 创建一个初始状态为禁止的子窗口，一个禁止状态的窗口不能接受来自用户的输入信息  2. 在窗口创建之后，可以调用 EnableWindow 函数来启用该窗口</td>
</tr>
<tr>
<td>WS_DLGFRAME</td>
<td>创建一个带对话框边框风格的窗口，这种风格的窗口不能带标题条</td>
</tr>
<tr>
<td>WS_GROUP</td>
<td>1. 指定一组“控制窗口”的第一个“控制窗口”  2. 这个“控制窗口”组由第一个“控制窗口”和随后定义的“控制窗口”组成，自第二个“控制窗口”开始每个“控制窗口”具有 WS_GROUP 风格  3. 每个组的第一个“控制窗口”带有 WS_TABSTOP 风格，从而使用户可以在组间移动  4. 用户随后可以使用光标在组内的控制间改变键盘焦点</td>
</tr>
<tr>
<td>WS_HSCROLL</td>
<td>创建一个有水平滚动条的窗口</td>
</tr>
<tr>
<td>WS_ICONIC</td>
<td>创建一个初始状态为最小化状态的窗口，与 WS_MINIMIZE 风格相同</td>
</tr>
<tr>
<td>WS_MAXIMIZE</td>
<td>创建一个初始状态为最大化状态的窗口</td>
</tr>
<tr>
<td>WS_MAXIMIZEBOX</td>
<td>创建一个具有最大化按钮的窗口，该风格不能与 WS_EX_CONTEXTHELP 风格同时出现，同时必须指定 WS_SYSMENU 风格</td>
</tr>
<tr>
<td>WS_MINIMIZE</td>
<td>创建一个初始状态为最小化状态的窗口，与 WS_ICONIC 风格相同</td>
</tr>
<tr>
<td>WS_MINIMIZEBOX</td>
<td>创建一个具有最小化按钮的窗口，该风格不能与 WS_EX_CONTEXTHELP 风格同时出现，同时必须指定 WS_SYSMENU 风格</td>
</tr>
<tr>
<td>WS_OVERLAPPED</td>
<td>产生一个层叠的窗口，一个层叠的窗口有一个标题条和一个边框，与 WS_TILED 风格相同</td>
</tr>
<tr>
<td>WS_OVERLAPPEDWINDOW</td>
<td>相当于（WS_OVERLAPPED | WS_CAPTION | WS_SYSMENU | WS_THICKFRAME | WS_MINIMIZEBOX | WS_MAXIMIZEBOX），与 WS_TILEDWINDOW 风格相同</td>
</tr>
<tr>
<td>WS_POPUP</td>
<td>创建一个弹出式窗口，该风格不能与 WS_CHILD 风格同时使用。</td>
</tr>
<tr>
<td>WS_POPUPWINDOW</td>
<td>相当于（WS_POPUP | WS_BORDER | WS_SYSMENU），但 WS_CAPTION 和 WS_POPUPWINDOW 必须同时设定才能使窗口某单可见</td>
</tr>
<tr>
<td>WS_SIZEBOX</td>
<td>创建一个可调边框的窗口，与 WS_THICKFRAME 风格相同</td>
</tr>
<tr>
<td>WS_SYSMENU</td>
<td>创建一个在标题条上带有窗口菜单的窗口，必须同时设定 WS_CAPTION 风格</td>
</tr>
<tr>
<td>WS_TABSTOP</td>
<td>1. 创建一个“控制窗口”，在用户按下 Tab 键时可以获得键盘焦点。  2. 按下 Tab 键后使键盘焦点转移到下一具有 WS_TABSTOP 风格的“控制窗口”</td>
</tr>
<tr>
<td>WS_THICKFRAME</td>
<td>创建一个具有可调边框的窗口，与 WS_SIZEBOX 风格相同</td>
</tr>
<tr>
<td>WS_TILED</td>
<td>产生一个层叠的窗口，一个层叠的窗口有一个标题和一个边框，与 WS_OVERLAPPED 风格相同</td>
</tr>
<tr>
<td>WS_TILEDWINDOW</td>
<td>相当于（WS_OVERLAPPED | WS_CAPTION | WS_SYSMENU | WS_THICKFRAME | WS_MINIMIZEBOX | WS_MAXIMIZEBOX），与 WS_OVERLAPPEDWINDOW 风格相同</td>
</tr>
<tr>
<td>WS_VISIBLE</td>
<td>创建一个初始状态为可见的窗口</td>
</tr>
<tr>
<td>WS_VSCROLL</td>
<td>创建一个有垂直滚动条的窗口</td>
</tr>
</tbody></table>
<h4 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h4><pre class="line-numbers language-none"><code class="language-none">1. 如果函数成功，返回值为新窗口的句柄；

2. 如果函数失败，返回值为 NULL。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h3 id="ShowWindow"><a href="#ShowWindow" class="headerlink" title="ShowWindow"></a>ShowWindow</h3><h4 id="前言-3"><a href="#前言-3" class="headerlink" title="前言"></a>前言</h4><p> ShowWindow 函数用于设置窗口的显示状态</p>
<p>应用程序第一次调用 ShowWindow 时，应该使用 WinMain 函数的 nCmdshow 参数作为它的 nCmdShow  参数。</p>
<p>在随后调用 ShowWindow 函数时，必须使用下列显示方式中的一个给定值，而不是由 WinMain 函数的 nCmdSHow 参数指定的值。</p>
<h4 id="API-函数原型"><a href="#API-函数原型" class="headerlink" title="API 函数原型"></a>API 函数原型</h4><pre class="line-numbers language-none"><code class="language-none">BOOL WINAPI ShowWindow(
_In_  HWND hWnd,
_In_  int nCmdShow
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="具体参数解析-1"><a href="#具体参数解析-1" class="headerlink" title="具体参数解析"></a>具体参数解析</h4><table>
<thead>
<tr>
<th><strong>参数</strong></th>
<th><strong>含义</strong></th>
</tr>
</thead>
<tbody><tr>
<td>hWnd</td>
<td>窗口句柄</td>
</tr>
<tr>
<td>nCmdShow</td>
<td>控制窗口如何显示，如果发送应用程序的程序提供了 STARTUPINFO 结构，则应用程序第一次调用 ShowWindow 时该参数被忽略。否则，在第一次调用 ShowWindow 函数时，该值应为在函数 WinMain 中 nCmdShow 参数。</td>
</tr>
</tbody></table>
<p><strong>在随后的调用中，nCmdShow 参数可以为下列值之一：</strong></p>
<table>
<thead>
<tr>
<th><strong>显示方式</strong></th>
<th><strong>含义</strong></th>
</tr>
</thead>
<tbody><tr>
<td>SW_FORCEMINIMIZE</td>
<td>1. 最小化窗口，即使拥有窗口的线程被挂起也会最小化  2. 在从其他线程最小化窗口时才使用这个参数</td>
</tr>
<tr>
<td>SW_HIDE</td>
<td>隐藏窗口并激活其他窗口</td>
</tr>
<tr>
<td>SW_MAXIMIZE</td>
<td>最大化指定的窗口</td>
</tr>
<tr>
<td>SW_MINIMIZE</td>
<td>最小化指定的窗口并且激活在 Z 序中的下一个顶层窗口</td>
</tr>
<tr>
<td>SW_RESTORE</td>
<td>1. 激活并显示窗口  2. 如果窗口最小化或最大化，则系统将窗口恢复到原来的尺寸和位置  3. 在恢复最小化窗口时，应用程序应该指定这个标志。</td>
</tr>
<tr>
<td>SW_SHOW</td>
<td>在窗口原来的位置以原来的尺寸激活并显示窗口</td>
</tr>
<tr>
<td>SW_SHOWDEFAULT</td>
<td>依据在 STARTUPINFO 结构中指定的 SW_FLAG 标志设定显示状态，STARTUPINFO 结构是由启动应用程序的程序传递给 CreateProcess 函数的。</td>
</tr>
<tr>
<td>SW_SHOWMAXIMIZED</td>
<td>激活窗口并将其最大化</td>
</tr>
<tr>
<td>SW_SHOWMINIMIZED</td>
<td>激活窗口并将其最小化</td>
</tr>
<tr>
<td>SW_SHOWMINNOACTIVE</td>
<td>1. 窗口最小化  2. 在窗口激活的情况下，这个值跟 SW_SHOWMINIMIZED 很相似</td>
</tr>
<tr>
<td>SW_SHOWNA</td>
<td>1. 以窗口原来的位置以原来的尺寸显示窗口  2. 在窗口激活的情况下，这个值跟 SW_SHOW 很相似</td>
</tr>
<tr>
<td>SW_SHOWNOACTIVATE</td>
<td>1. 以窗口最近一次的位置和尺寸显示窗口  2. 在窗口激活的情况下，这个值跟 SW_SHOWNORMAL 很相似</td>
</tr>
<tr>
<td>SW_SHOWNORMAL</td>
<td>1. 激活并显示一个窗口  2. 如果窗口被最小化或最大化，系统将其恢复到原来的尺寸和大小  3. 应用程序在第一次显示窗口的时候应该指定此标志</td>
</tr>
</tbody></table>
<h4 id="返回值-1"><a href="#返回值-1" class="headerlink" title="返回值"></a>返回值</h4><pre class="line-numbers language-none"><code class="language-none">1. 如果窗口之前可见，则返回值为非 0；

2. 如果窗口之前被隐藏，则返回值为 0。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h3 id="UpdateWindow"><a href="#UpdateWindow" class="headerlink" title="UpdateWindow"></a>UpdateWindow</h3><h4 id="前言-4"><a href="#前言-4" class="headerlink" title="前言"></a>前言</h4><p>UpdateWindow 函数绕过应用程序的消息队列，直接发送 WM_PAINT 消息给指定窗口的窗口过程。</p>
<p> 如果窗口更新的区域不为空，UpdateWindow 函数通过发送一个 WM_PAINT 消息来更新指定窗口的客户区。如果更新区域为空，则不发送消息。</p>
<h4 id="API-函数原型-1"><a href="#API-函数原型-1" class="headerlink" title="API 函数原型"></a>API 函数原型</h4><pre class="line-numbers language-none"><code class="language-none">BOOL UpdateWindow(
_In_  HWND hWnd
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h4 id="参数解析"><a href="#参数解析" class="headerlink" title="参数解析"></a>参数解析</h4><table>
<thead>
<tr>
<th><strong>参数</strong></th>
<th><strong>含义</strong></th>
</tr>
</thead>
<tbody><tr>
<td>hWnd</td>
<td>指定要更新的窗口的句柄.</td>
</tr>
</tbody></table>
<h4 id="返回值-2"><a href="#返回值-2" class="headerlink" title="返回值"></a>返回值</h4><pre class="line-numbers language-none"><code class="language-none">1. 如果函数调用成功，返回值为非 0；

2. 如果函数调用不成功，返回值为 0。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<h2 id="事件驱动"><a href="#事件驱动" class="headerlink" title="事件驱动"></a>事件驱动</h2><p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110671.png" alt="image-20211030145250670"></p>
<h2 id="消息机制"><a href="#消息机制" class="headerlink" title="消息机制"></a>消息机制</h2><p>Windows 应用程序都是<code>消息（事件）驱动</code>的，任何一个窗口都能够接收消息，并对该消息做出相应的处理。Windows系统和应用程序均可产生消息。任何一个动作都会产生，比如：<code>点击</code>，<code>移动鼠标</code>，<code>改变窗口大小</code></p>
<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110672.png" alt="image-20211030145710677"></p>
<h2 id="三点补充"><a href="#三点补充" class="headerlink" title="三点补充"></a>三点补充</h2><p>注：FIFO–&gt;先进先出</p>
<p>非队列化消息 会绕过消息队列 进行**”插队”**</p>
<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110673.png" alt="image-20211030150414619"></p>
<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110674.png" alt="image-20211030150346598"></p>
<p>不关注的消息 会丢给</p>
<pre class="line-numbers language-none"><code class="language-none">DefWindowProc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h2 id="客户区和非客户区"><a href="#客户区和非客户区" class="headerlink" title="客户区和非客户区"></a>客户区和非客户区</h2><p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110675.png" alt="image-20211030150920737"></p>
<h2 id="绘制客户区"><a href="#绘制客户区" class="headerlink" title="绘制客户区"></a>绘制客户区</h2><h3 id="WNDPROC"><a href="#WNDPROC" class="headerlink" title="WNDPROC"></a>WNDPROC</h3><p>WNDPROC是一个函数指针，指向窗口过程函数</p>
<h4 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h4><pre class="line-numbers language-none"><code class="language-none">WNDPROC是一个函数指针，指向窗口过程函数。其定义结构如下：

typedef LRESULT (CALLBACK* WNDPROC)(HWND,UINT,WPARAM,LPARAM);
// HWND:窗口句柄
//UINT:消息ID
//WPARAM:附加消息信息，uMsg参数
//LPARAM：附加消息信息，uMsg参数<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110676.png" alt="image-20211030151313380"></p>
<p>客户区</p>
<pre class="line-numbers language-none"><code class="language-none">绘画初始化
获得客户区的位置坐标信息

WM_PAINT:处理窗口创建的消息
WM_DESTROY:处理窗口关闭的消息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<pre class="line-numbers language-none"><code class="language-none">响应鼠标左键的消息:WM_LBUTTONDOWN<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<pre class="line-numbers language-none"><code class="language-none">DOWN 和 UP 的区别<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>





<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110677.png" alt="image-20211030151926331"></p>
<h2 id="窗口销毁"><a href="#窗口销毁" class="headerlink" title="窗口销毁"></a>窗口销毁</h2><h3 id="DefWindowProc"><a href="#DefWindowProc" class="headerlink" title="DefWindowProc"></a>DefWindowProc</h3><h4 id="前言-5"><a href="#前言-5" class="headerlink" title="前言"></a>前言</h4><p>DefWindowProc 函数调用默认的窗口过程来处理我们不感兴趣的任何消息，该函数是为了确保每个消息都被处理。</p>
<p>DefWindowProc 函数传入和窗口过程同样的参数。</p>
<h4 id="API-函数原型-2"><a href="#API-函数原型-2" class="headerlink" title="API 函数原型"></a>API 函数原型</h4><pre class="line-numbers language-none"><code class="language-none">LRESULT WINAPI DefWindowProc(
_In_  HWND hWnd,
_In_  UINT Msg,
_In_  WPARAM wParam,
_In_  LPARAM lParam
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="参数解析-1"><a href="#参数解析-1" class="headerlink" title="参数解析"></a>参数解析</h4><table>
<thead>
<tr>
<th><strong>参数</strong></th>
<th><strong>含义</strong></th>
</tr>
</thead>
<tbody><tr>
<td>hWnd</td>
<td>指定接收消息的窗口句柄</td>
</tr>
<tr>
<td>Msg</td>
<td>1. 消息的标识符，由于数值不便于记忆，所以 Windows 将消息对应的数值定义为 WM_XXX 宏的形式  2. 应用程序消息只能使用低 16 位，高 16 位被系统保留  3. 传送门：<a target="_blank" rel="noopener" href="http://bbs.fishc.com/thread-47244-1-1.html">Windows 常用消息及含义</a></td>
</tr>
<tr>
<td>wParam</td>
<td>指定消息的附加消息，确切的含义取决于消息成员的值</td>
</tr>
<tr>
<td>lParam</td>
<td>指定消息的附加消息，确切的含义取决于消息成员的值</td>
</tr>
</tbody></table>
<h4 id="返回值-3"><a href="#返回值-3" class="headerlink" title="返回值"></a>返回值</h4><pre class="line-numbers language-none"><code class="language-none">返回值就是消息处理结果，它取决于发送的消息。<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110678.png" alt="image-20211030152838347"></p>
<h2 id="调用自己写的函数流程"><a href="#调用自己写的函数流程" class="headerlink" title="调用自己写的函数流程"></a>调用自己写的函数流程</h2><p>发送消息给Windows–&gt;Windows通过消息间接调用函数</p>
<h2 id="抢占式多任务环境"><a href="#抢占式多任务环境" class="headerlink" title="抢占式多任务环境"></a>抢占式多任务环境</h2><h2 id="三大核心部件"><a href="#三大核心部件" class="headerlink" title="三大核心部件"></a>三大核心部件</h2><p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110679.png" alt="image-20211030153645485"></p>
<h2 id="设备环境"><a href="#设备环境" class="headerlink" title="设备环境"></a>设备环境</h2><p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110680.png" alt="image-20211030153900950"></p>
<h2 id="获取设备环境句柄"><a href="#获取设备环境句柄" class="headerlink" title="获取设备环境句柄"></a>获取设备环境句柄</h2><p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110681.png" alt="image-20211030153950285"></p>
<h2 id="TextOut"><a href="#TextOut" class="headerlink" title="TextOut"></a>TextOut</h2><h3 id="前言-6"><a href="#前言-6" class="headerlink" title="前言"></a>前言</h3><p>TextOut 函数使用当前选择的字体、背景颜色和文本颜色，将一个字符串绘制于窗口的指定位置。</p>
<p>注：默认是左上角</p>
<h3 id="API-函数原型-3"><a href="#API-函数原型-3" class="headerlink" title="API 函数原型"></a>API 函数原型</h3><p> 注释：<code>_In_ </code>说明该参数是输入的，<code>_opt_ </code>说明该参数是可选参数</p>
<pre class="line-numbers language-none"><code class="language-none">BOOL TextOut(
_In_  HDC hdc,
_In_  int nXStart,
_In_  int nYStart,
_In_  LPCTSTR lpString,
_In_  int cchString
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="参数解析-2"><a href="#参数解析-2" class="headerlink" title="参数解析"></a>参数解析</h3><table>
<thead>
<tr>
<th><strong>参数</strong></th>
<th><strong>含义</strong></th>
</tr>
</thead>
<tbody><tr>
<td>hdc</td>
<td>设备环境句柄</td>
</tr>
<tr>
<td>nXStart</td>
<td>指定用于字符串对齐的基准点的逻辑 x 坐标（有关基准点请看下边备注）</td>
</tr>
<tr>
<td>nYStart</td>
<td>指定用于字符串对齐的基准点的逻辑 y 坐标</td>
</tr>
<tr>
<td>lpString</td>
<td>1. 指向将被绘制字符串的指针  2. 该字符串不必以’\0’结束，因为 cchString 参数指定了该字符串的长度</td>
</tr>
<tr>
<td>cchString</td>
<td>lpString 字符串的长度（有多少个字符）</td>
</tr>
</tbody></table>
<h3 id="返回值-4"><a href="#返回值-4" class="headerlink" title="返回值"></a>返回值</h3><pre class="line-numbers language-none"><code class="language-none">1. 如果函数调用成功，返回值为非 0

2. 如果函数调用失败，返回值为 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110682.png" alt="image-20211030154223181"></p>
<h2 id="字符串处理"><a href="#字符串处理" class="headerlink" title="字符串处理"></a>字符串处理</h2><p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110683.png" alt="image-20211030172936167"></p>
<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110684.png" alt="image-20211030173253347"></p>
<p>注：</p>
<pre class="line-numbers language-none"><code class="language-none">lstrlen:获得字符个数<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h2 id="安全的字符串处理"><a href="#安全的字符串处理" class="headerlink" title="安全的字符串处理"></a>安全的字符串处理</h2><p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110685.png" alt="image-20211030173032737"></p>
<p><strong>主要是 考虑 缓冲区溢出问题</strong></p>
<p>需要添加头文件</p>
<pre class="line-numbers language-none"><code class="language-none">#include "strsafe.h"<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>





<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110686.png" alt="image-20211030174026344"></p>
<h2 id="不要试图猜测文本的尺寸"><a href="#不要试图猜测文本的尺寸" class="headerlink" title="不要试图猜测文本的尺寸"></a>不要试图猜测文本的尺寸</h2><p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110687.png" alt="image-20211030174913656"></p>
<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110688.png" alt="image-20211030175111104"></p>
<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110689.png" alt="image-20211030174846812"></p>
<p><strong>注：不要使用固定的值</strong></p>
<p>应该使用：<code>GetTextMetrics</code></p>
<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110690.png" alt="image-20211030175248453"></p>
<h2 id="获取窗口的尺寸"><a href="#获取窗口的尺寸" class="headerlink" title="获取窗口的尺寸"></a>获取窗口的尺寸</h2><p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110691.png" alt="image-20211030175412829"></p>
<h2 id="设备独立性"><a href="#设备独立性" class="headerlink" title="设备独立性"></a>设备独立性</h2><p>简单来说，不用管用户 用的是什么物理设备</p>
<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110692.png" alt="image-20211030175443306"></p>
<h2 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h2><pre class="line-numbers language-none"><code class="language-none">#include &lt;Windows.h&gt;

LRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);

//主函数
int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR szCmdLine, int iCmdShow)
//int WINAPI wWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd)
{
    static TCHAR szAppName[] = TEXT("MyWindows");
    HWND hwnd;
    MSG msg;
    WNDCLASS wndclass;

    wndclass.style = CS_HREDRAW | CS_VREDRAW;
    wndclass.lpfnWndProc = WndProc;
    wndclass.cbClsExtra = 0;
    wndclass.cbWndExtra = 0;
    wndclass.hInstance = hInstance;
    wndclass.hIcon = LoadIcon(NULL, IDI_APPLICATION);
    wndclass.hCursor = LoadCursor(NULL, IDC_ARROW);
    wndclass.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);
    wndclass.lpszMenuName = NULL;
    wndclass.lpszClassName = szAppName;




    if (!RegisterClass(&amp;wndclass))
    {
        MessageBox(NULL, TEXT("这个程序需要在Windows NT上才可以执行！"), szAppName, MB_ICONERROR);
        return 0;
    }

    hwnd = CreateWindow(
        szAppName,
        TEXT("MyWindow"),
        WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        NULL,
        NULL,
        hInstance,
        NULL);
    ShowWindow(hwnd, iCmdShow);
    UpdateWindow(hwnd);

    while (GetMessage(&amp;msg, NULL, 0, 0)) //GetMessage()从消息队列取出消息
    {
        TranslateMessage(&amp;msg); //将虚拟键消息转换为字符消息
        DispatchMessage(&amp;msg); //将WM_AAA消息分配窗口过程MyWindowProc
    }
    return msg.wParam;
}

//自定义窗口过程
LRESULT CALLBACK WndProc(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{   
    HDC hdc;
    PAINTSTRUCT ps;
    RECT rect;
    switch (message)
    {
    case WM_PAINT:
        hdc = BeginPaint(hwnd, &amp;ps);
        GetClientRect(hwnd, &amp;rect);
        DrawText(hdc, TEXT("MyWindows"), -1, &amp;rect,
            DT_SINGLELINE | DT_CENTER | DT_VCENTER);
        EndPaint(hwnd, &amp;ps);
        return 0;
    case WM_DESTROY:
        PostQuitMessage(0);
        return 0;

     return DefWindowProcW(hwnd, message, wParam, lParam);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="滚动条"><a href="#滚动条" class="headerlink" title="滚动条"></a>滚动条</h2><h3 id="前言-7"><a href="#前言-7" class="headerlink" title="前言"></a>前言</h3><p>滚动条的出现最大限度的提高了用户的体验</p>
<h3 id="获得客户区的尺寸"><a href="#获得客户区的尺寸" class="headerlink" title="获得客户区的尺寸"></a>获得客户区的尺寸</h3><p>1.</p>
<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110693.png" alt="image-20211109211735831"></p>
<p>2.</p>
<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110694.png" alt="image-20211109211744346"></p>
<p>3.</p>
<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110695.png" alt="image-20211109211910830"></p>
<p>我们的重点是第三种</p>
<h3 id="WM-SIZE"><a href="#WM-SIZE" class="headerlink" title="WM_SIZE"></a>WM_SIZE</h3><h4 id="前言-8"><a href="#前言-8" class="headerlink" title="前言"></a>前言</h4><p> 当主窗口的客户区部分大小改变时，操作系统将给应用程序发送 WM_SIZE 消息，应用程序通过窗口过程接收该消息</p>
<h4 id="消息定义"><a href="#消息定义" class="headerlink" title="消息定义"></a>消息定义</h4><pre class="line-numbers language-none"><code class="language-none">#define WM_SIZE                         0x0005<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="参数解析-3"><a href="#参数解析-3" class="headerlink" title="参数解析"></a>参数解析</h4><pre class="line-numbers language-none"><code class="language-none">wParam:指出窗口的新状态*

wParam:参数值参考如下<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<table>
<thead>
<tr>
<th><strong>值</strong></th>
<th><strong>含义</strong></th>
</tr>
</thead>
<tbody><tr>
<td>SIZE_MAXHIDE（4）</td>
<td>当该应用程序的其他窗口被最大化的时候，消息被发送往所有的弹出窗口</td>
</tr>
<tr>
<td>SIZE_MAXIMIZED（2）</td>
<td>该窗口被最大化</td>
</tr>
<tr>
<td>SIZE_MAXSHOW（3）</td>
<td>当该应用程序的其他窗口已经恢复到原来大小的时候，消息被发送往所有的弹出窗口</td>
</tr>
<tr>
<td>SIZE_MINIMIZED（1）</td>
<td>该窗口被最小化</td>
</tr>
<tr>
<td>SIZE_RESTORED（0）</td>
<td>该窗口的大小发生变化，但不是最大化（SIZE_MAXIMIZED）或最小化（MINIMIZED）</td>
</tr>
</tbody></table>
<h4 id="lParam"><a href="#lParam" class="headerlink" title="lParam"></a>lParam</h4><p>指出当前客户区的大小（宽度和高度）</p>
<pre class="line-numbers language-none"><code class="language-none">1. lParam 参数的低 16 位指定了新窗口的宽度

2. lParam 参数的高 16 位制定了新窗口的高度<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<p>注：可以通过 <a target="_blank" rel="noopener" href="http://bbs.fishc.com/thread-50382-1-1.html">LOWORD 宏</a>和 <a target="_blank" rel="noopener" href="http://bbs.fishc.com/thread-50382-1-1.html">HIWORD 宏</a>来获取 lParam 参数的低 16 位和高 16 位。</p>
<h4 id="返回值-5"><a href="#返回值-5" class="headerlink" title="返回值"></a>返回值</h4><p> 如果窗口过程响应该消息，必须返回 0</p>
<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110696.png" alt="image-20211109213530591"></p>
<h2 id="添加滚动条"><a href="#添加滚动条" class="headerlink" title="添加滚动条"></a>添加滚动条</h2><p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110697.png" alt="image-20211110093610342"></p>
<h2 id="滚动条触发消息"><a href="#滚动条触发消息" class="headerlink" title="滚动条触发消息"></a>滚动条触发消息</h2><p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110698.png" alt="image-20211110093938996"></p>
<h2 id="Windows负责"><a href="#Windows负责" class="headerlink" title="Windows负责"></a>Windows负责</h2><p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110699.png" alt="image-20211110094924470"></p>
<h2 id="代码负责"><a href="#代码负责" class="headerlink" title="代码负责"></a>代码负责</h2><p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110700.png" alt="image-20211110095018532"></p>
<p><img src="https://gitee.com/work-hard-every-day/test/raw/master/img/202111102110701.png" alt="image-20211110095038102"></p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">每天都要努力哇</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://Redamancy404.github.io/2021/10/28/windows-api-xue-xi/">http://Redamancy404.github.io/2021/10/28/windows-api-xue-xi/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">每天都要努力哇</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Windows-API%E5%AD%A6%E4%B9%A0/">
                                    <span class="chip bg-color">Windows API学习</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2021/10/28/websphere/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/21.jpg" class="responsive-img" alt="WebSphere小结">
                        
                        <span class="card-title">WebSphere小结</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            分享者才是学习中最大的受益者！
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-10-28
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%9C%8D%E5%8A%A1%E6%94%BB%E9%98%B2/" class="post-category">
                                    服务攻防
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/WebSphere%E5%B0%8F%E7%BB%93/">
                        <span class="chip bg-color">WebSphere小结</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/10/28/windows-ying-ji-xiang-ying/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/3.jpg" class="responsive-img" alt="Windows应急响应">
                        
                        <span class="card-title">Windows应急响应</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            分享者才是学习中最大的受益者！
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-10-28
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/" class="post-category">
                                    应急响应
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Windows%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/">
                        <span class="chip bg-color">Windows应急响应</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2021</span>
            
            <a href="/about" target="_blank">每天都要努力哇</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/Redamancy404/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                        class="white-color">179.6k</span>
            
            
            
            
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link ">
    <a href="https://github.com/Redamancy404" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1181062873@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1181062873" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1181062873" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body>

</html>
