<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="安卓学习(六), 每天都要努力哇">
    <meta name="description" content="分享者才是学习中最大的受益者！">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>安卓学习(六) | 每天都要努力哇</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="每天都要努力哇" type="application/atom+xml">
</head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">每天都要努力哇</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">每天都要努力哇</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/Redamancy404/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/Redamancy404/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/16.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">安卓学习(六)</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0-%E5%85%AD/">
                                <span class="chip bg-color">安卓学习(六)</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97/" class="post-category">
                                安卓学习系列
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-10-28
                </div>
                

                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    7.1k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    38 分
                </div>
                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="JNI"><a href="#JNI" class="headerlink" title="JNI"></a>JNI</h1><p>JNI是Java Native Interface的缩写，通过使用 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Java/85979">Java</a>本地接口书写程序，可以确保代码在不同的平台上方便移植。</p>
<p>从Java1.1开始，JNI标准成为java平台的一部分，它允许Java代码和其他语言写的<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E4%BB%A3%E7%A0%81/86048">代码</a>进行交互。JNI一开始是为了本地已<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%BC%96%E8%AF%91/1258343">编译</a>语言，尤其是C和C++而设计的，但是它并不妨碍你使用其他编程语言，只要调用约定受支持就可以了。</p>
<p>使用java与本地已编译的代码<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E4%BA%A4%E4%BA%92/6964417">交互</a>，通常会丧失平台<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%8F%AF%E7%A7%BB%E6%A4%8D%E6%80%A7/6931884">可移植性</a>。但是，有些情况下这样做是可以接受的，甚至是必须的。</p>
<p>JNI的接口就是一些函数的API</p>
<h3 id="JNI接口"><a href="#JNI接口" class="headerlink" title="JNI接口"></a>JNI接口</h3><p>Java语言发展到现在已经经历了20多年，其语言框架本身已经非常成熟，而且整个生态都保持得非常好，因而再与底层的C、甚至汇编进行辅助的话，那就能释放出更强大的威力来。而Java要与本地底层代码进行交互，则需要通过<code>JNI(Java Native Interface)</code>接口</p>
<h3 id="JNI作用"><a href="#JNI作用" class="headerlink" title="JNI作用"></a>JNI作用</h3><p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812132234704.png" alt="image-20210812132234704"></p>
<p>JN接口是处在Java层和C/C++层之间，承担桥梁作用</p>
<p>1、通过JN接口实现Java层与 Native层相互调用<br>2、JNI接口中的类型</p>
<pre class="line-numbers language-none"><code class="language-none">1、调用java层普通方法-CallObjectMethod

2、获取Java层实例字段的值-GetMethodID

3、获取Java层实例字段的值

4、设置Java层实例字段的值

5、调用Java层静态方法

6、获取Java层静态字段的值

7、设置Java层静态宇段的值

8、New开头的函数就是创建<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-none"><code class="language-none">get 获取
set 设置
call 调用<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h3 id="CallObjectMethod"><a href="#CallObjectMethod" class="headerlink" title="CallObjectMethod"></a>CallObjectMethod</h3><p>调用一个方法，返回值是 Object</p>
<p>void是表示返回值为空！所以使用的方法就是构建参数后面三个参数</p>
<h4 id="JNIEnv"><a href="#JNIEnv" class="headerlink" title="JNIEnv*"></a>JNIEnv*</h4><pre class="line-numbers language-none"><code class="language-none">默认参数

动态调试经常用到，本地调用的一个接口，提供了大量的jni接口函数去调用

可以理解为JNI默认传入的参数型<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="jobject"><a href="#jobject" class="headerlink" title="jobject"></a>jobject</h4><pre class="line-numbers language-none"><code class="language-none">也是默认参数<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="jmethodID"><a href="#jmethodID" class="headerlink" title="jmethodID"></a>jmethodID</h4><p>CallObjectMethod运行操作时的一个方法ID，用来获取java层方法的ID</p>
<p>在这之前 要先使用，使用<code>GetMethodID</code>方法获取方法ID，作为返回值</p>
<h3 id="GetMethodID"><a href="#GetMethodID" class="headerlink" title="GetMethodID"></a>GetMethodID</h3><p>它是获取Java层实例字段的值<code>GetMethodID</code></p>
<pre class="line-numbers language-none"><code class="language-none">jmethodID (*GetMethodID)(JNIEnv*, jclass, const char*, const char*);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>1、<code>JNIEnv</code>：默认参数！<br>2）<code>jclass</code>：一个 findclass引用<br>这里的返回值和jclass目的是一样的，jclass这个参数是由findclass返回值获取的</p>
<p>3、<code>const char*</code>：参数列表信息3）const char:Java层方法的名称<br>4、<code>const char*</code>：Java层方法的一个签名，是返回值+参数</p>
<h3 id="获取Java层实例字段的值"><a href="#获取Java层实例字段的值" class="headerlink" title="获取Java层实例字段的值"></a>获取Java层实例字段的值</h3><pre class="line-numbers language-none"><code class="language-none">jobject (*GetObjectField)(JNIEnv*, jobject, jfieldID);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>获取jfieldID的获取</p>
<pre class="line-numbers language-none"><code class="language-none">jfieldID (*GetFieldID)(JNIEnv*, jclass, const char*, const char*);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="设置Java层实例字段的值"><a href="#设置Java层实例字段的值" class="headerlink" title="设置Java层实例字段的值"></a>设置Java层实例字段的值</h3><pre class="line-numbers language-none"><code class="language-none">void (*SetObjectField)(JNIEnv*, jobject, jfieldID, jobject);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>jfeldID是 GetFieldID的返回值！<br>jobject是一个java层实例字段设置的值！</p>
<h1 id="NDK"><a href="#NDK" class="headerlink" title="NDK"></a>NDK</h1><h2 id="Eclipse快速创建项目"><a href="#Eclipse快速创建项目" class="headerlink" title="Eclipse快速创建项目"></a>Eclipse快速创建项目</h2><p>这个 我们之前 有提到过</p>
<p>这里就快速过</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/202108121801416.png"></p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812180217575.png" alt="image-20210812180217575"></p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812180240336.png" alt="image-20210812180240336"></p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812180323169.png" alt="image-20210812180323169"></p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812180344424.png" alt="image-20210812180344424"></p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812180429143.png" alt="image-20210812180429143"></p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812180614473.png" alt="image-20210812180614473"></p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812182808692.png" alt="image-20210812182808692"></p>
<h2 id="静态注册-一"><a href="#静态注册-一" class="headerlink" title="静态注册(一)"></a>静态注册(一)</h2><p>在Java层使用jni接口获取C层定义的一个字符</p>
<p>定位<code>MainActivity.java</code> </p>
<p>上一节<a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/mobile/284486.html">安卓学习思路方法总结（四）</a>讲到JNI和c的联动</p>
<p>创建JNI的文件夹</p>
<p>然后三个文件：<code>aaa.c</code>、<code>Application.mk</code>、<code>Android.mk</code></p>
<p>然后在JNI目录下进行：<code>ndk-build</code>编译</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/202108121659162.png" alt="image-20210812135357852"></p>
<p>继续</p>
<p>这一块时安卓 后期界面的显示</p>
<p>先删掉</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812194132765.png" alt="image-20210812194132765"></p>
<h3 id="定义一个方法"><a href="#定义一个方法" class="headerlink" title="定义一个方法"></a>定义一个方法</h3><pre class="line-numbers language-none"><code class="language-none">public native CharSequence Getstring();<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812200105803.png" alt="image-20210812200105803"></p>
<p>在java层使用JDG反编译的时候是看不到它的逻辑代码，只能看到空荡荡的一个方法名，而且这个方法的具体实现在java层是看不到的</p>
<p>掌握ndk开发的知识，在so程序找到它对应的一个<code>.so</code>文件，然后去分析它的一个逻辑</p>
<h3 id="区分动态注册！"><a href="#区分动态注册！" class="headerlink" title="区分动态注册！"></a>区分动态注册！</h3><p>动态注册会使用到<code>JNI_onload</code>类里面有个注册函数；</p>
<p>这里已经定义了一个被native修饰的方法，那么修饰这个方法就要做一些操作，在java层用 Toast展示出来     </p>
<pre class="line-numbers language-none"><code class="language-none">Toast.makeTest(context,text,duration);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812200248765.png" alt="image-20210812200248765"></p>
<pre class="line-numbers language-none"><code class="language-none">context:上下文
text:弹出的内容字符
duration:显示的一个时长<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>然后进行修改</p>
<pre class="line-numbers language-none"><code class="language-none">context-&gt;this上下文
text-&gt;方法Getstring()
duration-&gt;Toast.LENGTH_SHORT<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>进行显示</p>
<pre class="line-numbers language-none"><code class="language-none">.show()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-none"><code class="language-none">Toast.makeText(this,Getstring(),Toast.LENGTH_SHORT).show();<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812195740331.png" alt="image-20210812195740331"></p>
<h3 id="获取src目录"><a href="#获取src目录" class="headerlink" title="获取src目录"></a>获取src目录</h3><p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812200610213.png"></p>
<pre class="line-numbers language-none"><code class="language-none">D:\data\aaa\src<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812200630982.png" alt="image-20210812200630982"></p>
<h3 id="获取完整路径"><a href="#获取完整路径" class="headerlink" title="获取完整路径"></a>获取完整路径</h3><p>被<code>native</code>修饰的一个方法 <code>Getstring()</code>所在的一个类的完整的路径</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812201323490.png" alt="image-20210812201323490"></p>
<pre class="line-numbers language-none"><code class="language-none">com.example.aaa.MainActivity<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812201251156.png" alt="image-20210812201251156"></p>
<h3 id="javah"><a href="#javah" class="headerlink" title="javah"></a>javah</h3><p>​    使用javah命令</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812200750394.png" alt="image-20210812200750394"></p>
<p>我们底层调用的头文件<code>.h</code>就是JNI样式的标头文件</p>
<pre class="line-numbers language-none"><code class="language-none">javah -jni com.example.aaa.MainActivity<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812210650157.png" alt="image-20210812210650157"></p>
<h3 id="Refresh"><a href="#Refresh" class="headerlink" title="Refresh"></a>Refresh</h3><p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812210738450.png" alt="image-20210812210738450"></p>
<p>在src目录生成<code>.h</code>的头文件</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812210811988.png" alt="image-20210812210811988"></p>
<p>进行分析</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812211054865.png" alt="image-20210812211054865"></p>
<pre class="line-numbers language-none"><code class="language-none">JNIEXPORT-&gt;标识符
jobject -&gt;返回值
JNICALL-&gt;标识符<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h3 id="万能表"><a href="#万能表" class="headerlink" title="万能表"></a>万能表</h3><pre class="line-numbers language-none"><code class="language-none">#ifndef JNI_H_
#define JNI_H_

#include &lt;sys/cdefs.h&gt;
#include &lt;stdarg.h&gt;

#ifdef HAVE_INTTYPES_H
# include &lt;inttypes.h&gt;      /* C99 */
	//这个是JNI规范中定义的基本数据类型
	//typedef 关键字，可以使用它来为类型取一个新的名字。
	//举个例子：typedef unsigned char BYTE;在这个类型定义之后，标识符 BYTE 可作为类型 unsigned char 的缩写
typedef uint8_t         jboolean;       /* unsigned 8 bits */
typedef int8_t          jbyte;          /* signed 8 bits */
typedef uint16_t        jchar;          /* unsigned 16 bits */
typedef int16_t         jshort;         /* signed 16 bits */
typedef int32_t         jint;           /* signed 32 bits */
typedef int64_t         jlong;          /* signed 64 bits */
typedef float           jfloat;         /* 32-bit IEEE 754 */
typedef double          jdouble;        /* 64-bit IEEE 754 */
#else
typedef unsigned char   jboolean;       /* unsigned 8 bits */
typedef signed char     jbyte;          /* signed 8 bits */
typedef unsigned short  jchar;          /* unsigned 16 bits */
typedef short           jshort;         /* signed 16 bits */
typedef int             jint;           /* signed 32 bits */
typedef long long       jlong;          /* signed 64 bits */
typedef float           jfloat;         /* 32-bit IEEE 754 */
typedef double          jdouble;        /* 64-bit IEEE 754 */
#endif

/* "cardinal indices and sizes" */
typedef jint            jsize;			//表示返回数组的大小

#ifdef __cplusplus
/*
 * Reference types, in C++			//与C++有关的定义
 */
class _jobject {};
class _jclass : public _jobject {};
class _jstring : public _jobject {};
class _jarray : public _jobject {};
class _jobjectArray : public _jarray {};
class _jbooleanArray : public _jarray {};
class _jbyteArray : public _jarray {};
class _jcharArray : public _jarray {};
class _jshortArray : public _jarray {};
class _jintArray : public _jarray {};
class _jlongArray : public _jarray {};
class _jfloatArray : public _jarray {};
class _jdoubleArray : public _jarray {};
class _jthrowable : public _jobject {};
			//为C++的一些类型进行重新定义
typedef _jobject*       jobject;
typedef _jclass*        jclass;
typedef _jstring*       jstring;
typedef _jarray*        jarray;
typedef _jobjectArray*  jobjectArray;
typedef _jbooleanArray* jbooleanArray;
typedef _jbyteArray*    jbyteArray;
typedef _jcharArray*    jcharArray;
typedef _jshortArray*   jshortArray;
typedef _jintArray*     jintArray;
typedef _jlongArray*    jlongArray;
typedef _jfloatArray*   jfloatArray;
typedef _jdoubleArray*  jdoubleArray;
typedef _jthrowable*    jthrowable;
typedef _jobject*       jweak;


#else /* not __cplusplus */

/*
 * Reference types, in C.			//与C有关的，继续为类型起新的名字；有arrary表示按JNI 标准定义的数组类型
 */				
			
typedef void*           jobject;
typedef jobject         jclass;
typedef jobject         jstring;
typedef jobject         jarray;
typedef jarray          jobjectArray;
typedef jarray          jbooleanArray;
typedef jarray          jbyteArray;
typedef jarray          jcharArray;
typedef jarray          jshortArray;
typedef jarray          jintArray;
typedef jarray          jlongArray;
typedef jarray          jfloatArray;
typedef jarray          jdoubleArray;
typedef jobject         jthrowable;
typedef jobject         jweak;

#endif /* not __cplusplus */
				//两个方法ID和字段ID
struct _jfieldID;                       /* opaque structure */
typedef struct _jfieldID* jfieldID;     /* field IDs */

struct _jmethodID;                      /* opaque structure */
typedef struct _jmethodID* jmethodID;   /* method IDs */

				//定义一个结构体JNIInvokeInterface，是一个调用接口的结构体
struct JNIInvokeInterface; 
				//定义一个联合体jvalue，里面有各种类型
typedef union jvalue {
    jboolean    z;
    jbyte       b;
    jchar       c;
    jshort      s;
    jint        i;
    jlong       j;
    jfloat      f;
    jdouble     d;
    jobject     l;
} jvalue;
				//定义一个枚举jobjectRefType，里面有各种枚举元素
typedef enum jobjectRefType {
    JNIInvalidRefType = 0,
    JNILocalRefType = 1,
    JNIGlobalRefType = 2,
    JNIWeakGlobalRefType = 3
} jobjectRefType;

				//定义一个动态注册JNINativeMethod结构体，这个与动态注册有关，里面有三个元素
typedef struct {
    const char* name; //第一个参数 name 是java 方法名；
    const char* signature; //第二个参数 signature 用于描述方法的参数与返回值，也就是java方法签名信息，
    void*       fnPtr; //第三个参数 fnPtr 是函数指针，指向 jni 函数；
} JNINativeMethod;
		
//		其中，第二个参数 signature 使用字符串记录方法的参数与返回值，具体格式形如“()V”、“(II)V”，其中分为两部分，括号内表示的是参数，括号右侧表示的是返回值；

struct _JNIEnv;
struct _JavaVM;
			//定义一个JNINativeInterface结构体，表示原生调用接口的结构体
typedef const struct JNINativeInterface* C_JNIEnv;

#if defined(__cplusplus)
typedef _JNIEnv JNIEnv;
typedef _JavaVM JavaVM;
#else
					//这里有两个接口，一个是本地接口，一个是调用接口
typedef const struct JNINativeInterface* JNIEnv;//JNI本地接口
typedef const struct JNIInvokeInterface* JavaVM;//JNI调用接口
#endif
		//本地接口结构体的定义
struct JNINativeInterface {
    void*       reserved0;
    void*       reserved1;
    void*       reserved2;
    void*       reserved3;

    jint        (*GetVersion)(JNIEnv *);		//jint返回的是版本信息
	
					//jclass，返回的是类			
						
    jclass      (*DefineClass)(JNIEnv*, const char*, jobject, const jbyte*,jsize);
    jclass      (*FindClass)(JNIEnv*, const char*);

    jmethodID   (*FromReflectedMethod)(JNIEnv*, jobject);
    jfieldID    (*FromReflectedField)(JNIEnv*, jobject);
   
    jobject     (*ToReflectedMethod)(JNIEnv*, jclass, jmethodID, jboolean);
    jclass      (*GetSuperclass)(JNIEnv*, jclass);
    jboolean    (*IsAssignableFrom)(JNIEnv*, jclass, jclass);

    jobject     (*ToReflectedField)(JNIEnv*, jclass, jfieldID, jboolean);
				//与异常有关的方法
    jint        (*Throw)(JNIEnv*, jthrowable);
    jint        (*ThrowNew)(JNIEnv *, jclass, const char *);
    jthrowable  (*ExceptionOccurred)(JNIEnv*);
    void        (*ExceptionDescribe)(JNIEnv*);
    void        (*ExceptionClear)(JNIEnv*);
    void        (*FatalError)(JNIEnv*, const char*);

    jint        (*PushLocalFrame)(JNIEnv*, jint);
    jobject     (*PopLocalFrame)(JNIEnv*, jobject);

    jobject     (*NewGlobalRef)(JNIEnv*, jobject);
    void        (*DeleteGlobalRef)(JNIEnv*, jobject);
    void        (*DeleteLocalRef)(JNIEnv*, jobject);
    jboolean    (*IsSameObject)(JNIEnv*, jobject, jobject);

    jobject     (*NewLocalRef)(JNIEnv*, jobject);
    jint        (*EnsureLocalCapacity)(JNIEnv*, jint);
				//新建object
    jobject     (*AllocObject)(JNIEnv*, jclass);
    jobject     (*NewObject)(JNIEnv*, jclass, jmethodID, ...);
    jobject     (*NewObjectV)(JNIEnv*, jclass, jmethodID, va_list);
    jobject     (*NewObjectA)(JNIEnv*, jclass, jmethodID, jvalue*);

    jclass      (*GetObjectClass)(JNIEnv*, jobject);
    jboolean    (*IsInstanceOf)(JNIEnv*, jobject, jclass);
    jmethodID   (*GetMethodID)(JNIEnv*, jclass, const char*, const char*);
					//调用方法
    jobject     (*CallObjectMethod)(JNIEnv*, jobject, jmethodID, ...);
    jobject     (*CallObjectMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    jobject     (*CallObjectMethodA)(JNIEnv*, jobject, jmethodID, jvalue*);
    jboolean    (*CallBooleanMethod)(JNIEnv*, jobject, jmethodID, ...);
    jboolean    (*CallBooleanMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    jboolean    (*CallBooleanMethodA)(JNIEnv*, jobject, jmethodID, jvalue*);
    jbyte       (*CallByteMethod)(JNIEnv*, jobject, jmethodID, ...);
    jbyte       (*CallByteMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    jbyte       (*CallByteMethodA)(JNIEnv*, jobject, jmethodID, jvalue*);
    jchar       (*CallCharMethod)(JNIEnv*, jobject, jmethodID, ...);
    jchar       (*CallCharMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    jchar       (*CallCharMethodA)(JNIEnv*, jobject, jmethodID, jvalue*);
    jshort      (*CallShortMethod)(JNIEnv*, jobject, jmethodID, ...);
    jshort      (*CallShortMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    jshort      (*CallShortMethodA)(JNIEnv*, jobject, jmethodID, jvalue*);
    jint        (*CallIntMethod)(JNIEnv*, jobject, jmethodID, ...);
    jint        (*CallIntMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    jint        (*CallIntMethodA)(JNIEnv*, jobject, jmethodID, jvalue*);
    jlong       (*CallLongMethod)(JNIEnv*, jobject, jmethodID, ...);
    jlong       (*CallLongMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    jlong       (*CallLongMethodA)(JNIEnv*, jobject, jmethodID, jvalue*);
    jfloat      (*CallFloatMethod)(JNIEnv*, jobject, jmethodID, ...) __NDK_FPABI__;
    jfloat      (*CallFloatMethodV)(JNIEnv*, jobject, jmethodID, va_list) __NDK_FPABI__;
    jfloat      (*CallFloatMethodA)(JNIEnv*, jobject, jmethodID, jvalue*) __NDK_FPABI__;
    jdouble     (*CallDoubleMethod)(JNIEnv*, jobject, jmethodID, ...) __NDK_FPABI__;
    jdouble     (*CallDoubleMethodV)(JNIEnv*, jobject, jmethodID, va_list) __NDK_FPABI__;
    jdouble     (*CallDoubleMethodA)(JNIEnv*, jobject, jmethodID, jvalue*) __NDK_FPABI__;
    void        (*CallVoidMethod)(JNIEnv*, jobject, jmethodID, ...);
    void        (*CallVoidMethodV)(JNIEnv*, jobject, jmethodID, va_list);
    void        (*CallVoidMethodA)(JNIEnv*, jobject, jmethodID, jvalue*);

    jobject     (*CallNonvirtualObjectMethod)(JNIEnv*, jobject, jclass, jmethodID, ...);
    jobject     (*CallNonvirtualObjectMethodV)(JNIEnv*, jobject, jclass,jmethodID, va_list);
    jobject     (*CallNonvirtualObjectMethodA)(JNIEnv*, jobject, jclass,jmethodID, jvalue*);
    jboolean    (*CallNonvirtualBooleanMethod)(JNIEnv*, jobject, jclass,jmethodID, ...);
    jboolean    (*CallNonvirtualBooleanMethodV)(JNIEnv*, jobject, jclass,jmethodID, va_list);
    jboolean    (*CallNonvirtualBooleanMethodA)(JNIEnv*, jobject, jclass,jmethodID, jvalue*);
    jbyte       (*CallNonvirtualByteMethod)(JNIEnv*, jobject, jclass,jmethodID, ...);
    jbyte       (*CallNonvirtualByteMethodV)(JNIEnv*, jobject, jclass,jmethodID, va_list);
    jbyte       (*CallNonvirtualByteMethodA)(JNIEnv*, jobject, jclass,jmethodID, jvalue*);
    jchar       (*CallNonvirtualCharMethod)(JNIEnv*, jobject, jclass,jmethodID, ...);
    jchar       (*CallNonvirtualCharMethodV)(JNIEnv*, jobject, jclass,jmethodID, va_list);
    jchar       (*CallNonvirtualCharMethodA)(JNIEnv*, jobject, jclass, jmethodID, jvalue*);
    jshort      (*CallNonvirtualShortMethod)(JNIEnv*, jobject, jclass, jmethodID, ...);
    jshort      (*CallNonvirtualShortMethodV)(JNIEnv*, jobject, jclass,jmethodID, va_list);
    jshort      (*CallNonvirtualShortMethodA)(JNIEnv*, jobject, jclass,jmethodID, jvalue*);
    jint        (*CallNonvirtualIntMethod)(JNIEnv*, jobject, jclass,jmethodID, ...);
    jint        (*CallNonvirtualIntMethodV)(JNIEnv*, jobject, jclass,jmethodID, va_list);
    jint        (*CallNonvirtualIntMethodA)(JNIEnv*, jobject, jclass,jmethodID, jvalue*);
    jlong       (*CallNonvirtualLongMethod)(JNIEnv*, jobject, jclass,jmethodID, ...);
    jlong       (*CallNonvirtualLongMethodV)(JNIEnv*, jobject, jclass,jmethodID, va_list);
    jlong       (*CallNonvirtualLongMethodA)(JNIEnv*, jobject, jclass,jmethodID, jvalue*);
    jfloat      (*CallNonvirtualFloatMethod)(JNIEnv*, jobject, jclass,jmethodID, ...) __NDK_FPABI__;
    jfloat      (*CallNonvirtualFloatMethodV)(JNIEnv*, jobject, jclass,jmethodID, va_list) __NDK_FPABI__;
    jfloat      (*CallNonvirtualFloatMethodA)(JNIEnv*, jobject, jclass, jmethodID, jvalue*) __NDK_FPABI__;
    jdouble     (*CallNonvirtualDoubleMethod)(JNIEnv*, jobject, jclass,jmethodID, ...) __NDK_FPABI__;
    jdouble     (*CallNonvirtualDoubleMethodV)(JNIEnv*, jobject, jclass,jmethodID, va_list) __NDK_FPABI__;
    jdouble     (*CallNonvirtualDoubleMethodA)(JNIEnv*, jobject, jclass,jmethodID, jvalue*) __NDK_FPABI__;
    void        (*CallNonvirtualVoidMethod)(JNIEnv*, jobject, jclass,jmethodID, ...);
    void        (*CallNonvirtualVoidMethodV)(JNIEnv*, jobject, jclass,jmethodID, va_list);
    void        (*CallNonvirtualVoidMethodA)(JNIEnv*, jobject, jclass,jmethodID, jvalue*);
				
				//获取各种字段
    jfieldID    (*GetFieldID)(JNIEnv*, jclass, const char*, const char*);

    jobject     (*GetObjectField)(JNIEnv*, jobject, jfieldID);
    jboolean    (*GetBooleanField)(JNIEnv*, jobject, jfieldID);
    jbyte       (*GetByteField)(JNIEnv*, jobject, jfieldID);
    jchar       (*GetCharField)(JNIEnv*, jobject, jfieldID);
    jshort      (*GetShortField)(JNIEnv*, jobject, jfieldID);
    jint        (*GetIntField)(JNIEnv*, jobject, jfieldID);
    jlong       (*GetLongField)(JNIEnv*, jobject, jfieldID);
    jfloat      (*GetFloatField)(JNIEnv*, jobject, jfieldID) __NDK_FPABI__;
    jdouble     (*GetDoubleField)(JNIEnv*, jobject, jfieldID) __NDK_FPABI__;
					//设置各种字段，返回为空
    void        (*SetObjectField)(JNIEnv*, jobject, jfieldID, jobject);
    void        (*SetBooleanField)(JNIEnv*, jobject, jfieldID, jboolean);
    void        (*SetByteField)(JNIEnv*, jobject, jfieldID, jbyte);
    void        (*SetCharField)(JNIEnv*, jobject, jfieldID, jchar);
    void        (*SetShortField)(JNIEnv*, jobject, jfieldID, jshort);
    void        (*SetIntField)(JNIEnv*, jobject, jfieldID, jint);
    void        (*SetLongField)(JNIEnv*, jobject, jfieldID, jlong);
    void        (*SetFloatField)(JNIEnv*, jobject, jfieldID, jfloat) __NDK_FPABI__;
    void        (*SetDoubleField)(JNIEnv*, jobject, jfieldID, jdouble) __NDK_FPABI__;

    jmethodID   (*GetStaticMethodID)(JNIEnv*, jclass, const char*, const char*);

    jobject     (*CallStaticObjectMethod)(JNIEnv*, jclass, jmethodID, ...);
    jobject     (*CallStaticObjectMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    jobject     (*CallStaticObjectMethodA)(JNIEnv*, jclass, jmethodID, jvalue*);
    jboolean    (*CallStaticBooleanMethod)(JNIEnv*, jclass, jmethodID, ...);
    jboolean    (*CallStaticBooleanMethodV)(JNIEnv*, jclass, jmethodID,va_list);
    jboolean    (*CallStaticBooleanMethodA)(JNIEnv*, jclass, jmethodID,jvalue*);
    jbyte       (*CallStaticByteMethod)(JNIEnv*, jclass, jmethodID, ...);
    jbyte       (*CallStaticByteMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    jbyte       (*CallStaticByteMethodA)(JNIEnv*, jclass, jmethodID, jvalue*);
    jchar       (*CallStaticCharMethod)(JNIEnv*, jclass, jmethodID, ...);
    jchar       (*CallStaticCharMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    jchar       (*CallStaticCharMethodA)(JNIEnv*, jclass, jmethodID, jvalue*);
    jshort      (*CallStaticShortMethod)(JNIEnv*, jclass, jmethodID, ...);
    jshort      (*CallStaticShortMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    jshort      (*CallStaticShortMethodA)(JNIEnv*, jclass, jmethodID, jvalue*);
    jint        (*CallStaticIntMethod)(JNIEnv*, jclass, jmethodID, ...);
    jint        (*CallStaticIntMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    jint        (*CallStaticIntMethodA)(JNIEnv*, jclass, jmethodID, jvalue*);
    jlong       (*CallStaticLongMethod)(JNIEnv*, jclass, jmethodID, ...);
    jlong       (*CallStaticLongMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    jlong       (*CallStaticLongMethodA)(JNIEnv*, jclass, jmethodID, jvalue*);
    jfloat      (*CallStaticFloatMethod)(JNIEnv*, jclass, jmethodID, ...) __NDK_FPABI__;
    jfloat      (*CallStaticFloatMethodV)(JNIEnv*, jclass, jmethodID, va_list) __NDK_FPABI__;
    jfloat      (*CallStaticFloatMethodA)(JNIEnv*, jclass, jmethodID, jvalue*) __NDK_FPABI__;
    jdouble     (*CallStaticDoubleMethod)(JNIEnv*, jclass, jmethodID, ...) __NDK_FPABI__;
    jdouble     (*CallStaticDoubleMethodV)(JNIEnv*, jclass, jmethodID, va_list) __NDK_FPABI__;
    jdouble     (*CallStaticDoubleMethodA)(JNIEnv*, jclass, jmethodID, jvalue*) __NDK_FPABI__;
    void        (*CallStaticVoidMethod)(JNIEnv*, jclass, jmethodID, ...);
    void        (*CallStaticVoidMethodV)(JNIEnv*, jclass, jmethodID, va_list);
    void        (*CallStaticVoidMethodA)(JNIEnv*, jclass, jmethodID, jvalue*);

    jfieldID    (*GetStaticFieldID)(JNIEnv*, jclass, const char*,const char*);

    jobject     (*GetStaticObjectField)(JNIEnv*, jclass, jfieldID);
    jboolean    (*GetStaticBooleanField)(JNIEnv*, jclass, jfieldID);
    jbyte       (*GetStaticByteField)(JNIEnv*, jclass, jfieldID);
    jchar       (*GetStaticCharField)(JNIEnv*, jclass, jfieldID);
    jshort      (*GetStaticShortField)(JNIEnv*, jclass, jfieldID);
    jint        (*GetStaticIntField)(JNIEnv*, jclass, jfieldID);
    jlong       (*GetStaticLongField)(JNIEnv*, jclass, jfieldID);
    jfloat      (*GetStaticFloatField)(JNIEnv*, jclass, jfieldID) __NDK_FPABI__;
    jdouble     (*GetStaticDoubleField)(JNIEnv*, jclass, jfieldID) __NDK_FPABI__;

    void        (*SetStaticObjectField)(JNIEnv*, jclass, jfieldID, jobject);
    void        (*SetStaticBooleanField)(JNIEnv*, jclass, jfieldID, jboolean);
    void        (*SetStaticByteField)(JNIEnv*, jclass, jfieldID, jbyte);
    void        (*SetStaticCharField)(JNIEnv*, jclass, jfieldID, jchar);
    void        (*SetStaticShortField)(JNIEnv*, jclass, jfieldID, jshort);
    void        (*SetStaticIntField)(JNIEnv*, jclass, jfieldID, jint);
    void        (*SetStaticLongField)(JNIEnv*, jclass, jfieldID, jlong);
    void        (*SetStaticFloatField)(JNIEnv*, jclass, jfieldID, jfloat) __NDK_FPABI__;
    void        (*SetStaticDoubleField)(JNIEnv*, jclass, jfieldID, jdouble) __NDK_FPABI__;

    jstring     (*NewString)(JNIEnv*, const jchar*, jsize);
    jsize       (*GetStringLength)(JNIEnv*, jstring);
    const jchar*(*GetStringChars)(JNIEnv*, jstring, jboolean*);
    void        (*ReleaseStringChars)(JNIEnv*, jstring, const jchar*);
    jstring     (*NewStringUTF)(JNIEnv*, const char*);
    jsize       (*GetStringUTFLength)(JNIEnv*, jstring);
  
    const char* (*GetStringUTFChars)(JNIEnv*, jstring, jboolean*);
    void        (*ReleaseStringUTFChars)(JNIEnv*, jstring, const char*);
    jsize       (*GetArrayLength)(JNIEnv*, jarray);
    jobjectArray(*NewObjectArray)(JNIEnv*, jsize, jclass, jobject);
    jobject     (*GetObjectArrayElement)(JNIEnv*, jobjectArray, jsize);
    void        (*SetObjectArrayElement)(JNIEnv*, jobjectArray, jsize, jobject);

    jbooleanArray (*NewBooleanArray)(JNIEnv*, jsize);
    jbyteArray    (*NewByteArray)(JNIEnv*, jsize);
    jcharArray    (*NewCharArray)(JNIEnv*, jsize);
    jshortArray   (*NewShortArray)(JNIEnv*, jsize);
    jintArray     (*NewIntArray)(JNIEnv*, jsize);
    jlongArray    (*NewLongArray)(JNIEnv*, jsize);
    jfloatArray   (*NewFloatArray)(JNIEnv*, jsize);
    jdoubleArray  (*NewDoubleArray)(JNIEnv*, jsize);

    jboolean*   (*GetBooleanArrayElements)(JNIEnv*, jbooleanArray, jboolean*);
    jbyte*      (*GetByteArrayElements)(JNIEnv*, jbyteArray, jboolean*);
    jchar*      (*GetCharArrayElements)(JNIEnv*, jcharArray, jboolean*);
    jshort*     (*GetShortArrayElements)(JNIEnv*, jshortArray, jboolean*);
    jint*       (*GetIntArrayElements)(JNIEnv*, jintArray, jboolean*);
    jlong*      (*GetLongArrayElements)(JNIEnv*, jlongArray, jboolean*);
    jfloat*     (*GetFloatArrayElements)(JNIEnv*, jfloatArray, jboolean*);
    jdouble*    (*GetDoubleArrayElements)(JNIEnv*, jdoubleArray, jboolean*);

    void        (*ReleaseBooleanArrayElements)(JNIEnv*, jbooleanArray,jboolean*, jint);
    void        (*ReleaseByteArrayElements)(JNIEnv*, jbyteArray,jbyte*, jint);
    void        (*ReleaseCharArrayElements)(JNIEnv*, jcharArray,jchar*, jint);
    void        (*ReleaseShortArrayElements)(JNIEnv*, jshortArray,jshort*, jint);
    void        (*ReleaseIntArrayElements)(JNIEnv*, jintArray,jint*, jint);
    void        (*ReleaseLongArrayElements)(JNIEnv*, jlongArray,jlong*, jint);
    void        (*ReleaseFloatArrayElements)(JNIEnv*, jfloatArray,jfloat*, jint);
    void        (*ReleaseDoubleArrayElements)(JNIEnv*, jdoubleArray,jdouble*, jint);

    void        (*GetBooleanArrayRegion)(JNIEnv*, jbooleanArray,jsize,jsize, jboolean*);
    void        (*GetByteArrayRegion)(JNIEnv*, jbyteArray,jsize, jsize,jbyte*);
    void        (*GetCharArrayRegion)(JNIEnv*, jcharArray, jsize, jsize,jchar*);
    void        (*GetShortArrayRegion)(JNIEnv*, jshortArray,jsize, jsize,jshort*);
    void        (*GetIntArrayRegion)(JNIEnv*, jintArray,jsize, jsize, jint*);
    void        (*GetLongArrayRegion)(JNIEnv*, jlongArray,jsize, jsize, jlong*);
    void        (*GetFloatArrayRegion)(JNIEnv*, jfloatArray,jsize, jsize, jfloat*);
    void        (*GetDoubleArrayRegion)(JNIEnv*, jdoubleArray,jsize, jsize, jdouble*);

    void        (*SetBooleanArrayRegion)(JNIEnv*, jbooleanArray,jsize, jsize, const jboolean*);
    void        (*SetByteArrayRegion)(JNIEnv*, jbyteArray,jsize, jsize, const jbyte*);
    void        (*SetCharArrayRegion)(JNIEnv*, jcharArray,jsize, jsize, const jchar*);
    void        (*SetShortArrayRegion)(JNIEnv*, jshortArray,jsize, jsize, const jshort*);
    void        (*SetIntArrayRegion)(JNIEnv*, jintArray,jsize, jsize, const jint*);
    void        (*SetLongArrayRegion)(JNIEnv*, jlongArray, jsize, jsize, const jlong*);
    void        (*SetFloatArrayRegion)(JNIEnv*, jfloatArray, jsize, jsize, const jfloat*);
    void        (*SetDoubleArrayRegion)(JNIEnv*, jdoubleArray,jsize, jsize, const jdouble*);

    jint        (*RegisterNatives)(JNIEnv*, jclass, const JNINativeMethod*,jint);
    jint        (*UnregisterNatives)(JNIEnv*, jclass);
    jint        (*MonitorEnter)(JNIEnv*, jobject);
    jint        (*MonitorExit)(JNIEnv*, jobject);
    jint        (*GetJavaVM)(JNIEnv*, JavaVM**);

    void        (*GetStringRegion)(JNIEnv*, jstring, jsize, jsize, jchar*);
    void        (*GetStringUTFRegion)(JNIEnv*, jstring, jsize, jsize, char*);

    void*       (*GetPrimitiveArrayCritical)(JNIEnv*, jarray, jboolean*);
    void        (*ReleasePrimitiveArrayCritical)(JNIEnv*, jarray, void*, jint);

    const jchar*(*GetStringCritical)(JNIEnv*, jstring, jboolean*);
    void        (*ReleaseStringCritical)(JNIEnv*, jstring, const jchar*);

    jweak       (*NewWeakGlobalRef)(JNIEnv*, jobject);
    void        (*DeleteWeakGlobalRef)(JNIEnv*, jweak);

    jboolean    (*ExceptionCheck)(JNIEnv*);

    jobject     (*NewDirectByteBuffer)(JNIEnv*, void*, jlong);
    void*       (*GetDirectBufferAddress)(JNIEnv*, jobject);
    jlong       (*GetDirectBufferCapacity)(JNIEnv*, jobject);
	
    jobjectRefType (*GetObjectRefType)(JNIEnv*, jobject);
};

/*
 * C++ 
 */
			//C++的JNI 本地接口结构体的调用
struct _JNIEnv {
    const struct JNINativeInterface* functions;

#if defined(__cplusplus)
			//各种函数
    jint GetVersion()
    { return functions-&gt;GetVersion(this); }

    jclass DefineClass(const char *name, jobject loader, const jbyte* buf,
        jsize bufLen)
    { return functions-&gt;DefineClass(this, name, loader, buf, bufLen); }

    jclass FindClass(const char* name)
    { return functions-&gt;FindClass(this, name); }

    jmethodID FromReflectedMethod(jobject method)
    { return functions-&gt;FromReflectedMethod(this, method); }

    jfieldID FromReflectedField(jobject field)
    { return functions-&gt;FromReflectedField(this, field); }

    jobject ToReflectedMethod(jclass cls, jmethodID methodID, jboolean isStatic)
    { return functions-&gt;ToReflectedMethod(this, cls, methodID, isStatic); }

    jclass GetSuperclass(jclass clazz)
    { return functions-&gt;GetSuperclass(this, clazz); }

    jboolean IsAssignableFrom(jclass clazz1, jclass clazz2)
    { return functions-&gt;IsAssignableFrom(this, clazz1, clazz2); }

    jobject ToReflectedField(jclass cls, jfieldID fieldID, jboolean isStatic)
    { return functions-&gt;ToReflectedField(this, cls, fieldID, isStatic); }

    jint Throw(jthrowable obj)
    { return functions-&gt;Throw(this, obj); }

    jint ThrowNew(jclass clazz, const char* message)
    { return functions-&gt;ThrowNew(this, clazz, message); }

    jthrowable ExceptionOccurred()
    { return functions-&gt;ExceptionOccurred(this); }

    void ExceptionDescribe()
    { functions-&gt;ExceptionDescribe(this); }

    void ExceptionClear()
    { functions-&gt;ExceptionClear(this); }

    void FatalError(const char* msg)
    { functions-&gt;FatalError(this, msg); }

    jint PushLocalFrame(jint capacity)
    { return functions-&gt;PushLocalFrame(this, capacity); }

    jobject PopLocalFrame(jobject result)
    { return functions-&gt;PopLocalFrame(this, result); }

    jobject NewGlobalRef(jobject obj)
    { return functions-&gt;NewGlobalRef(this, obj); }

    void DeleteGlobalRef(jobject globalRef)
    { functions-&gt;DeleteGlobalRef(this, globalRef); }

    void DeleteLocalRef(jobject localRef)
    { functions-&gt;DeleteLocalRef(this, localRef); }

    jboolean IsSameObject(jobject ref1, jobject ref2)
    { return functions-&gt;IsSameObject(this, ref1, ref2); }

    jobject NewLocalRef(jobject ref)
    { return functions-&gt;NewLocalRef(this, ref); }

    jint EnsureLocalCapacity(jint capacity)
    { return functions-&gt;EnsureLocalCapacity(this, capacity); }

    jobject AllocObject(jclass clazz)
    { return functions-&gt;AllocObject(this, clazz); }

    jobject NewObject(jclass clazz, jmethodID methodID, ...)
    {
        va_list args;
        va_start(args, methodID);
        jobject result = functions-&gt;NewObjectV(this, clazz, methodID, args);
        va_end(args);
        return result;
    }

    jobject NewObjectV(jclass clazz, jmethodID methodID, va_list args)
    { return functions-&gt;NewObjectV(this, clazz, methodID, args); }

    jobject NewObjectA(jclass clazz, jmethodID methodID, jvalue* args)
    { return functions-&gt;NewObjectA(this, clazz, methodID, args); }

    jclass GetObjectClass(jobject obj)
    { return functions-&gt;GetObjectClass(this, obj); }

    jboolean IsInstanceOf(jobject obj, jclass clazz)
    { return functions-&gt;IsInstanceOf(this, obj, clazz); }

    jmethodID GetMethodID(jclass clazz, const char* name, const char* sig)
    { return functions-&gt;GetMethodID(this, clazz, name, sig); }

#define CALL_TYPE_METHOD(_jtype, _jname)                                    \
    __NDK_FPABI__                                                           \
    _jtype Call##_jname##Method(jobject obj, jmethodID methodID, ...)       \
    {                                                                       \
        _jtype result;                                                      \
        va_list args;                                                       \
        va_start(args, methodID);                                           \
        result = functions-&gt;Call##_jname##MethodV(this, obj, methodID,      \
                    args);                                                  \
        va_end(args);                                                       \
        return result;                                                      \
    }
#define CALL_TYPE_METHODV(_jtype, _jname)                                   \
    __NDK_FPABI__                                                           \
    _jtype Call##_jname##MethodV(jobject obj, jmethodID methodID,           \
        va_list args)                                                       \
    { return functions-&gt;Call##_jname##MethodV(this, obj, methodID, args); }
#define CALL_TYPE_METHODA(_jtype, _jname)                                   \
    __NDK_FPABI__                                                           \
    _jtype Call##_jname##MethodA(jobject obj, jmethodID methodID,           \
        jvalue* args)                                                       \
    { return functions-&gt;Call##_jname##MethodA(this, obj, methodID, args); }

#define CALL_TYPE(_jtype, _jname)                                           \
    CALL_TYPE_METHOD(_jtype, _jname)                                        \
    CALL_TYPE_METHODV(_jtype, _jname)                                       \
    CALL_TYPE_METHODA(_jtype, _jname)

    CALL_TYPE(jobject, Object)
    CALL_TYPE(jboolean, Boolean)
    CALL_TYPE(jbyte, Byte)
    CALL_TYPE(jchar, Char)
    CALL_TYPE(jshort, Short)
    CALL_TYPE(jint, Int)
    CALL_TYPE(jlong, Long)
    CALL_TYPE(jfloat, Float)
    CALL_TYPE(jdouble, Double)

    void CallVoidMethod(jobject obj, jmethodID methodID, ...)
    {
        va_list args;
        va_start(args, methodID);
        functions-&gt;CallVoidMethodV(this, obj, methodID, args);
        va_end(args);
    }
    void CallVoidMethodV(jobject obj, jmethodID methodID, va_list args)
    { functions-&gt;CallVoidMethodV(this, obj, methodID, args); }
    void CallVoidMethodA(jobject obj, jmethodID methodID, jvalue* args)
    { functions-&gt;CallVoidMethodA(this, obj, methodID, args); }

#define CALL_NONVIRT_TYPE_METHOD(_jtype, _jname)                            \
    __NDK_FPABI__                                                           \
    _jtype CallNonvirtual##_jname##Method(jobject obj, jclass clazz,        \
        jmethodID methodID, ...)                                            \
    {                                                                       \
        _jtype result;                                                      \
        va_list args;                                                       \
        va_start(args, methodID);                                           \
        result = functions-&gt;CallNonvirtual##_jname##MethodV(this, obj,      \
                    clazz, methodID, args);                                 \
        va_end(args);                                                       \
        return result;                                                      \
    }
#define CALL_NONVIRT_TYPE_METHODV(_jtype, _jname)                           \
    __NDK_FPABI__                                                           \
    _jtype CallNonvirtual##_jname##MethodV(jobject obj, jclass clazz,       \
        jmethodID methodID, va_list args)                                   \
    { return functions-&gt;CallNonvirtual##_jname##MethodV(this, obj, clazz,   \
        methodID, args); }
#define CALL_NONVIRT_TYPE_METHODA(_jtype, _jname)                           \
    __NDK_FPABI__                                                           \
    _jtype CallNonvirtual##_jname##MethodA(jobject obj, jclass clazz,       \
        jmethodID methodID, jvalue* args)                                   \
    { return functions-&gt;CallNonvirtual##_jname##MethodA(this, obj, clazz,   \
        methodID, args); }

#define CALL_NONVIRT_TYPE(_jtype, _jname)                                   \
    CALL_NONVIRT_TYPE_METHOD(_jtype, _jname)                                \
    CALL_NONVIRT_TYPE_METHODV(_jtype, _jname)                               \
    CALL_NONVIRT_TYPE_METHODA(_jtype, _jname)

    CALL_NONVIRT_TYPE(jobject, Object)
    CALL_NONVIRT_TYPE(jboolean, Boolean)
    CALL_NONVIRT_TYPE(jbyte, Byte)
    CALL_NONVIRT_TYPE(jchar, Char)
    CALL_NONVIRT_TYPE(jshort, Short)
    CALL_NONVIRT_TYPE(jint, Int)
    CALL_NONVIRT_TYPE(jlong, Long)
    CALL_NONVIRT_TYPE(jfloat, Float)
    CALL_NONVIRT_TYPE(jdouble, Double)

    void CallNonvirtualVoidMethod(jobject obj, jclass clazz,
        jmethodID methodID, ...)
    {
        va_list args;
        va_start(args, methodID);
        functions-&gt;CallNonvirtualVoidMethodV(this, obj, clazz, methodID, args);
        va_end(args);
    }
    void CallNonvirtualVoidMethodV(jobject obj, jclass clazz,
        jmethodID methodID, va_list args)
    { functions-&gt;CallNonvirtualVoidMethodV(this, obj, clazz, methodID, args); }
    void CallNonvirtualVoidMethodA(jobject obj, jclass clazz,
        jmethodID methodID, jvalue* args)
    { functions-&gt;CallNonvirtualVoidMethodA(this, obj, clazz, methodID, args); }

    jfieldID GetFieldID(jclass clazz, const char* name, const char* sig)
    { return functions-&gt;GetFieldID(this, clazz, name, sig); }

    jobject GetObjectField(jobject obj, jfieldID fieldID)
    { return functions-&gt;GetObjectField(this, obj, fieldID); }
    jboolean GetBooleanField(jobject obj, jfieldID fieldID)
    { return functions-&gt;GetBooleanField(this, obj, fieldID); }
    jbyte GetByteField(jobject obj, jfieldID fieldID)
    { return functions-&gt;GetByteField(this, obj, fieldID); }
    jchar GetCharField(jobject obj, jfieldID fieldID)
    { return functions-&gt;GetCharField(this, obj, fieldID); }
    jshort GetShortField(jobject obj, jfieldID fieldID)
    { return functions-&gt;GetShortField(this, obj, fieldID); }
    jint GetIntField(jobject obj, jfieldID fieldID)
    { return functions-&gt;GetIntField(this, obj, fieldID); }
    jlong GetLongField(jobject obj, jfieldID fieldID)
    { return functions-&gt;GetLongField(this, obj, fieldID); }
    __NDK_FPABI__
    jfloat GetFloatField(jobject obj, jfieldID fieldID)
    { return functions-&gt;GetFloatField(this, obj, fieldID); }
    __NDK_FPABI__
    jdouble GetDoubleField(jobject obj, jfieldID fieldID)
    { return functions-&gt;GetDoubleField(this, obj, fieldID); }

    void SetObjectField(jobject obj, jfieldID fieldID, jobject value)
    { functions-&gt;SetObjectField(this, obj, fieldID, value); }
    void SetBooleanField(jobject obj, jfieldID fieldID, jboolean value)
    { functions-&gt;SetBooleanField(this, obj, fieldID, value); }
    void SetByteField(jobject obj, jfieldID fieldID, jbyte value)
    { functions-&gt;SetByteField(this, obj, fieldID, value); }
    void SetCharField(jobject obj, jfieldID fieldID, jchar value)
    { functions-&gt;SetCharField(this, obj, fieldID, value); }
    void SetShortField(jobject obj, jfieldID fieldID, jshort value)
    { functions-&gt;SetShortField(this, obj, fieldID, value); }
    void SetIntField(jobject obj, jfieldID fieldID, jint value)
    { functions-&gt;SetIntField(this, obj, fieldID, value); }
    void SetLongField(jobject obj, jfieldID fieldID, jlong value)
    { functions-&gt;SetLongField(this, obj, fieldID, value); }
    __NDK_FPABI__
    void SetFloatField(jobject obj, jfieldID fieldID, jfloat value)
    { functions-&gt;SetFloatField(this, obj, fieldID, value); }
    __NDK_FPABI__
    void SetDoubleField(jobject obj, jfieldID fieldID, jdouble value)
    { functions-&gt;SetDoubleField(this, obj, fieldID, value); }

    jmethodID GetStaticMethodID(jclass clazz, const char* name, const char* sig)
    { return functions-&gt;GetStaticMethodID(this, clazz, name, sig); }

#define CALL_STATIC_TYPE_METHOD(_jtype, _jname)                             \
    __NDK_FPABI__                                                           \
    _jtype CallStatic##_jname##Method(jclass clazz, jmethodID methodID,     \
        ...)                                                                \
    {                                                                       \
        _jtype result;                                                      \
        va_list args;                                                       \
        va_start(args, methodID);                                           \
        result = functions-&gt;CallStatic##_jname##MethodV(this, clazz,        \
                    methodID, args);                                        \
        va_end(args);                                                       \
        return result;                                                      \
    }
#define CALL_STATIC_TYPE_METHODV(_jtype, _jname)                            \
    __NDK_FPABI__                                                           \
    _jtype CallStatic##_jname##MethodV(jclass clazz, jmethodID methodID,    \
        va_list args)                                                       \
    { return functions-&gt;CallStatic##_jname##MethodV(this, clazz, methodID,  \
        args); }
#define CALL_STATIC_TYPE_METHODA(_jtype, _jname)                            \
    __NDK_FPABI__                                                           \
    _jtype CallStatic##_jname##MethodA(jclass clazz, jmethodID methodID,    \
        jvalue* args)                                                       \
    { return functions-&gt;CallStatic##_jname##MethodA(this, clazz, methodID,  \
        args); }

#define CALL_STATIC_TYPE(_jtype, _jname)                                    \
    CALL_STATIC_TYPE_METHOD(_jtype, _jname)                                 \
    CALL_STATIC_TYPE_METHODV(_jtype, _jname)                                \
    CALL_STATIC_TYPE_METHODA(_jtype, _jname)

    CALL_STATIC_TYPE(jobject, Object)
    CALL_STATIC_TYPE(jboolean, Boolean)
    CALL_STATIC_TYPE(jbyte, Byte)
    CALL_STATIC_TYPE(jchar, Char)
    CALL_STATIC_TYPE(jshort, Short)
    CALL_STATIC_TYPE(jint, Int)
    CALL_STATIC_TYPE(jlong, Long)
    CALL_STATIC_TYPE(jfloat, Float)
    CALL_STATIC_TYPE(jdouble, Double)

    void CallStaticVoidMethod(jclass clazz, jmethodID methodID, ...)
    {
        va_list args;
        va_start(args, methodID);
        functions-&gt;CallStaticVoidMethodV(this, clazz, methodID, args);
        va_end(args);
    }
    void CallStaticVoidMethodV(jclass clazz, jmethodID methodID, va_list args)
    { functions-&gt;CallStaticVoidMethodV(this, clazz, methodID, args); }
    void CallStaticVoidMethodA(jclass clazz, jmethodID methodID, jvalue* args)
    { functions-&gt;CallStaticVoidMethodA(this, clazz, methodID, args); }

    jfieldID GetStaticFieldID(jclass clazz, const char* name, const char* sig)
    { return functions-&gt;GetStaticFieldID(this, clazz, name, sig); }

    jobject GetStaticObjectField(jclass clazz, jfieldID fieldID)
    { return functions-&gt;GetStaticObjectField(this, clazz, fieldID); }
    jboolean GetStaticBooleanField(jclass clazz, jfieldID fieldID)
    { return functions-&gt;GetStaticBooleanField(this, clazz, fieldID); }
    jbyte GetStaticByteField(jclass clazz, jfieldID fieldID)
    { return functions-&gt;GetStaticByteField(this, clazz, fieldID); }
    jchar GetStaticCharField(jclass clazz, jfieldID fieldID)
    { return functions-&gt;GetStaticCharField(this, clazz, fieldID); }
    jshort GetStaticShortField(jclass clazz, jfieldID fieldID)
    { return functions-&gt;GetStaticShortField(this, clazz, fieldID); }
    jint GetStaticIntField(jclass clazz, jfieldID fieldID)
    { return functions-&gt;GetStaticIntField(this, clazz, fieldID); }
    jlong GetStaticLongField(jclass clazz, jfieldID fieldID)
    { return functions-&gt;GetStaticLongField(this, clazz, fieldID); }
    __NDK_FPABI__
    jfloat GetStaticFloatField(jclass clazz, jfieldID fieldID)
    { return functions-&gt;GetStaticFloatField(this, clazz, fieldID); }
    __NDK_FPABI__
    jdouble GetStaticDoubleField(jclass clazz, jfieldID fieldID)
    { return functions-&gt;GetStaticDoubleField(this, clazz, fieldID); }

    void SetStaticObjectField(jclass clazz, jfieldID fieldID, jobject value)
    { functions-&gt;SetStaticObjectField(this, clazz, fieldID, value); }
    void SetStaticBooleanField(jclass clazz, jfieldID fieldID, jboolean value)
    { functions-&gt;SetStaticBooleanField(this, clazz, fieldID, value); }
    void SetStaticByteField(jclass clazz, jfieldID fieldID, jbyte value)
    { functions-&gt;SetStaticByteField(this, clazz, fieldID, value); }
    void SetStaticCharField(jclass clazz, jfieldID fieldID, jchar value)
    { functions-&gt;SetStaticCharField(this, clazz, fieldID, value); }
    void SetStaticShortField(jclass clazz, jfieldID fieldID, jshort value)
    { functions-&gt;SetStaticShortField(this, clazz, fieldID, value); }
    void SetStaticIntField(jclass clazz, jfieldID fieldID, jint value)
    { functions-&gt;SetStaticIntField(this, clazz, fieldID, value); }
    void SetStaticLongField(jclass clazz, jfieldID fieldID, jlong value)
    { functions-&gt;SetStaticLongField(this, clazz, fieldID, value); }
    __NDK_FPABI__
    void SetStaticFloatField(jclass clazz, jfieldID fieldID, jfloat value)
    { functions-&gt;SetStaticFloatField(this, clazz, fieldID, value); }
    __NDK_FPABI__
    void SetStaticDoubleField(jclass clazz, jfieldID fieldID, jdouble value)
    { functions-&gt;SetStaticDoubleField(this, clazz, fieldID, value); }

    jstring NewString(const jchar* unicodeChars, jsize len)
    { return functions-&gt;NewString(this, unicodeChars, len); }

    jsize GetStringLength(jstring string)
    { return functions-&gt;GetStringLength(this, string); }

    const jchar* GetStringChars(jstring string, jboolean* isCopy)
    { return functions-&gt;GetStringChars(this, string, isCopy); }

    void ReleaseStringChars(jstring string, const jchar* chars)
    { functions-&gt;ReleaseStringChars(this, string, chars); }

    jstring NewStringUTF(const char* bytes)
    { return functions-&gt;NewStringUTF(this, bytes); }

    jsize GetStringUTFLength(jstring string)
    { return functions-&gt;GetStringUTFLength(this, string); }

    const char* GetStringUTFChars(jstring string, jboolean* isCopy)
    { return functions-&gt;GetStringUTFChars(this, string, isCopy); }

    void ReleaseStringUTFChars(jstring string, const char* utf)
    { functions-&gt;ReleaseStringUTFChars(this, string, utf); }

    jsize GetArrayLength(jarray array)
    { return functions-&gt;GetArrayLength(this, array); }

    jobjectArray NewObjectArray(jsize length, jclass elementClass,
        jobject initialElement)
    { return functions-&gt;NewObjectArray(this, length, elementClass,
        initialElement); }

    jobject GetObjectArrayElement(jobjectArray array, jsize index)
    { return functions-&gt;GetObjectArrayElement(this, array, index); }

    void SetObjectArrayElement(jobjectArray array, jsize index, jobject value)
    { functions-&gt;SetObjectArrayElement(this, array, index, value); }

    jbooleanArray NewBooleanArray(jsize length)
    { return functions-&gt;NewBooleanArray(this, length); }
    jbyteArray NewByteArray(jsize length)
    { return functions-&gt;NewByteArray(this, length); }
    jcharArray NewCharArray(jsize length)
    { return functions-&gt;NewCharArray(this, length); }
    jshortArray NewShortArray(jsize length)
    { return functions-&gt;NewShortArray(this, length); }
    jintArray NewIntArray(jsize length)
    { return functions-&gt;NewIntArray(this, length); }
    jlongArray NewLongArray(jsize length)
    { return functions-&gt;NewLongArray(this, length); }
    jfloatArray NewFloatArray(jsize length)
    { return functions-&gt;NewFloatArray(this, length); }
    jdoubleArray NewDoubleArray(jsize length)
    { return functions-&gt;NewDoubleArray(this, length); }

    jboolean* GetBooleanArrayElements(jbooleanArray array, jboolean* isCopy)
    { return functions-&gt;GetBooleanArrayElements(this, array, isCopy); }
    jbyte* GetByteArrayElements(jbyteArray array, jboolean* isCopy)
    { return functions-&gt;GetByteArrayElements(this, array, isCopy); }
    jchar* GetCharArrayElements(jcharArray array, jboolean* isCopy)
    { return functions-&gt;GetCharArrayElements(this, array, isCopy); }
    jshort* GetShortArrayElements(jshortArray array, jboolean* isCopy)
    { return functions-&gt;GetShortArrayElements(this, array, isCopy); }
    jint* GetIntArrayElements(jintArray array, jboolean* isCopy)
    { return functions-&gt;GetIntArrayElements(this, array, isCopy); }
    jlong* GetLongArrayElements(jlongArray array, jboolean* isCopy)
    { return functions-&gt;GetLongArrayElements(this, array, isCopy); }
    jfloat* GetFloatArrayElements(jfloatArray array, jboolean* isCopy)
    { return functions-&gt;GetFloatArrayElements(this, array, isCopy); }
    jdouble* GetDoubleArrayElements(jdoubleArray array, jboolean* isCopy)
    { return functions-&gt;GetDoubleArrayElements(this, array, isCopy); }

    void ReleaseBooleanArrayElements(jbooleanArray array, jboolean* elems,
        jint mode)
    { functions-&gt;ReleaseBooleanArrayElements(this, array, elems, mode); }
    void ReleaseByteArrayElements(jbyteArray array, jbyte* elems,
        jint mode)
    { functions-&gt;ReleaseByteArrayElements(this, array, elems, mode); }
    void ReleaseCharArrayElements(jcharArray array, jchar* elems,
        jint mode)
    { functions-&gt;ReleaseCharArrayElements(this, array, elems, mode); }
    void ReleaseShortArrayElements(jshortArray array, jshort* elems,
        jint mode)
    { functions-&gt;ReleaseShortArrayElements(this, array, elems, mode); }
    void ReleaseIntArrayElements(jintArray array, jint* elems,
        jint mode)
    { functions-&gt;ReleaseIntArrayElements(this, array, elems, mode); }
    void ReleaseLongArrayElements(jlongArray array, jlong* elems,
        jint mode)
    { functions-&gt;ReleaseLongArrayElements(this, array, elems, mode); }
    void ReleaseFloatArrayElements(jfloatArray array, jfloat* elems,
        jint mode)
    { functions-&gt;ReleaseFloatArrayElements(this, array, elems, mode); }
    void ReleaseDoubleArrayElements(jdoubleArray array, jdouble* elems,
        jint mode)
    { functions-&gt;ReleaseDoubleArrayElements(this, array, elems, mode); }

    void GetBooleanArrayRegion(jbooleanArray array, jsize start, jsize len,
        jboolean* buf)
    { functions-&gt;GetBooleanArrayRegion(this, array, start, len, buf); }
    void GetByteArrayRegion(jbyteArray array, jsize start, jsize len,
        jbyte* buf)
    { functions-&gt;GetByteArrayRegion(this, array, start, len, buf); }
    void GetCharArrayRegion(jcharArray array, jsize start, jsize len,
        jchar* buf)
    { functions-&gt;GetCharArrayRegion(this, array, start, len, buf); }
    void GetShortArrayRegion(jshortArray array, jsize start, jsize len,
        jshort* buf)
    { functions-&gt;GetShortArrayRegion(this, array, start, len, buf); }
    void GetIntArrayRegion(jintArray array, jsize start, jsize len,
        jint* buf)
    { functions-&gt;GetIntArrayRegion(this, array, start, len, buf); }
    void GetLongArrayRegion(jlongArray array, jsize start, jsize len,
        jlong* buf)
    { functions-&gt;GetLongArrayRegion(this, array, start, len, buf); }
    void GetFloatArrayRegion(jfloatArray array, jsize start, jsize len,
        jfloat* buf)
    { functions-&gt;GetFloatArrayRegion(this, array, start, len, buf); }
    void GetDoubleArrayRegion(jdoubleArray array, jsize start, jsize len,
        jdouble* buf)
    { functions-&gt;GetDoubleArrayRegion(this, array, start, len, buf); }

    void SetBooleanArrayRegion(jbooleanArray array, jsize start, jsize len,
        const jboolean* buf)
    { functions-&gt;SetBooleanArrayRegion(this, array, start, len, buf); }
    void SetByteArrayRegion(jbyteArray array, jsize start, jsize len,
        const jbyte* buf)
    { functions-&gt;SetByteArrayRegion(this, array, start, len, buf); }
    void SetCharArrayRegion(jcharArray array, jsize start, jsize len,
        const jchar* buf)
    { functions-&gt;SetCharArrayRegion(this, array, start, len, buf); }
    void SetShortArrayRegion(jshortArray array, jsize start, jsize len,
        const jshort* buf)
    { functions-&gt;SetShortArrayRegion(this, array, start, len, buf); }
    void SetIntArrayRegion(jintArray array, jsize start, jsize len,
        const jint* buf)
    { functions-&gt;SetIntArrayRegion(this, array, start, len, buf); }
    void SetLongArrayRegion(jlongArray array, jsize start, jsize len,
        const jlong* buf)
    { functions-&gt;SetLongArrayRegion(this, array, start, len, buf); }
    void SetFloatArrayRegion(jfloatArray array, jsize start, jsize len,
        const jfloat* buf)
    { functions-&gt;SetFloatArrayRegion(this, array, start, len, buf); }
    void SetDoubleArrayRegion(jdoubleArray array, jsize start, jsize len,
        const jdouble* buf)
    { functions-&gt;SetDoubleArrayRegion(this, array, start, len, buf); }

    jint RegisterNatives(jclass clazz, const JNINativeMethod* methods,
        jint nMethods)
    { return functions-&gt;RegisterNatives(this, clazz, methods, nMethods); }

    jint UnregisterNatives(jclass clazz)
    { return functions-&gt;UnregisterNatives(this, clazz); }

    jint MonitorEnter(jobject obj)
    { return functions-&gt;MonitorEnter(this, obj); }

    jint MonitorExit(jobject obj)
    { return functions-&gt;MonitorExit(this, obj); }

    jint GetJavaVM(JavaVM** vm)
    { return functions-&gt;GetJavaVM(this, vm); }

    void GetStringRegion(jstring str, jsize start, jsize len, jchar* buf)
    { functions-&gt;GetStringRegion(this, str, start, len, buf); }

    void GetStringUTFRegion(jstring str, jsize start, jsize len, char* buf)
    { return functions-&gt;GetStringUTFRegion(this, str, start, len, buf); }

    void* GetPrimitiveArrayCritical(jarray array, jboolean* isCopy)
    { return functions-&gt;GetPrimitiveArrayCritical(this, array, isCopy); }

    void ReleasePrimitiveArrayCritical(jarray array, void* carray, jint mode)
    { functions-&gt;ReleasePrimitiveArrayCritical(this, array, carray, mode); }

    const jchar* GetStringCritical(jstring string, jboolean* isCopy)
    { return functions-&gt;GetStringCritical(this, string, isCopy); }

    void ReleaseStringCritical(jstring string, const jchar* carray)
    { functions-&gt;ReleaseStringCritical(this, string, carray); }

    jweak NewWeakGlobalRef(jobject obj)
    { return functions-&gt;NewWeakGlobalRef(this, obj); }

    void DeleteWeakGlobalRef(jweak obj)
    { functions-&gt;DeleteWeakGlobalRef(this, obj); }

    jboolean ExceptionCheck()
    { return functions-&gt;ExceptionCheck(this); }

    jobject NewDirectByteBuffer(void* address, jlong capacity)
    { return functions-&gt;NewDirectByteBuffer(this, address, capacity); }

    void* GetDirectBufferAddress(jobject buf)
    { return functions-&gt;GetDirectBufferAddress(this, buf); }

    jlong GetDirectBufferCapacity(jobject buf)
    { return functions-&gt;GetDirectBufferCapacity(this, buf); }

    /* added in JNI 1.6 */
    jobjectRefType GetObjectRefType(jobject obj)
    { return functions-&gt;GetObjectRefType(this, obj); }
#endif /*__cplusplus*/
};


/*
 * JNI invocation interface.
 */
					//调用接口结构体JNIInvokeInterface的定义
struct JNIInvokeInterface {
    void*       reserved0;
    void*       reserved1;
    void*       reserved2;

    jint        (*DestroyJavaVM)(JavaVM*);
    jint        (*AttachCurrentThread)(JavaVM*, JNIEnv**, void*);
    jint        (*DetachCurrentThread)(JavaVM*);
    jint        (*GetEnv)(JavaVM*, void**, jint);
    jint        (*AttachCurrentThreadAsDaemon)(JavaVM*, JNIEnv**, void*);
};

/*
 * C++ version.
 */
struct _JavaVM {
    const struct JNIInvokeInterface* functions;

#if defined(__cplusplus)
    jint DestroyJavaVM()
    { return functions-&gt;DestroyJavaVM(this); }
    jint AttachCurrentThread(JNIEnv** p_env, void* thr_args)
    { return functions-&gt;AttachCurrentThread(this, p_env, thr_args); }
    jint DetachCurrentThread()
    { return functions-&gt;DetachCurrentThread(this); }
    jint GetEnv(void** env, jint version)
    { return functions-&gt;GetEnv(this, env, version); }
    jint AttachCurrentThreadAsDaemon(JNIEnv** p_env, void* thr_args)
    { return functions-&gt;AttachCurrentThreadAsDaemon(this, p_env, thr_args); }
#endif /*__cplusplus*/
};

struct JavaVMAttachArgs {
    jint        version;    /* must be &gt;= JNI_VERSION_1_2 */
    const char* name;       /* NULL or name of thread as modified UTF-8 str */
    jobject     group;      /* global ref of a ThreadGroup object, or NULL */
};
typedef struct JavaVMAttachArgs JavaVMAttachArgs;

/*
 * JNI 1.2+ initialization.  (As of 1.6, the pre-1.2 structures are no
 * longer supported.)
 */
typedef struct JavaVMOption {
    const char* optionString;
    void*       extraInfo;
} JavaVMOption;

typedef struct JavaVMInitArgs {
    jint        version;    /* use JNI_VERSION_1_2 or later */

    jint        nOptions;
    JavaVMOption* options;
    jboolean    ignoreUnrecognized;
} JavaVMInitArgs;

#ifdef __cplusplus
extern "C" {
#endif
/*
 * VM initialization functions.
 *
 * Note these are the only symbols exported for JNI by the VM.
 */
#if 0  /* In practice, these are not exported by the NDK so don't declare them */
jint JNI_GetDefaultJavaVMInitArgs(void*);
jint JNI_CreateJavaVM(JavaVM**, JNIEnv**, void*);
jint JNI_GetCreatedJavaVMs(JavaVM**, jsize, jsize*);
#endif

#define JNIIMPORT
#define JNIEXPORT  __attribute__ ((visibility ("default")))
#define JNICALL __NDK_FPABI__

/*
 * Prototypes for functions exported by loadable shared libs.  These are
 * called by JNI, not provided by JNI.
 */
JNIEXPORT jint JNICALL JNI_OnLoad(JavaVM* vm, void* reserved);
JNIEXPORT void JNICALL JNI_OnUnload(JavaVM* vm, void* reserved);

#ifdef __cplusplus
}
#endif


/*
 * Manifest constants.
 */
#define JNI_FALSE   0
#define JNI_TRUE    1

#define JNI_VERSION_1_1 0x00010001
#define JNI_VERSION_1_2 0x00010002
#define JNI_VERSION_1_4 0x00010004
#define JNI_VERSION_1_6 0x00010006

#define JNI_OK          (0)         /* no error */
#define JNI_ERR         (-1)        /* generic error */
#define JNI_EDETACHED   (-2)        /* thread detached from the VM */
#define JNI_EVERSION    (-3)        /* JNI version error */

#define JNI_COMMIT      1           /* copy content, do not free buffer */
#define JNI_ABORT       2           /* free buffer w/o copying back */

#endif  /* JNI_H_ */<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>然后我们继续</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812211740195.png" alt="image-20210812211740195"></p>
<p>返回值、方法名称、参数类型</p>
<h3 id="创建jni文件夹"><a href="#创建jni文件夹" class="headerlink" title="创建jni文件夹"></a>创建jni文件夹</h3><p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812212159567.png" alt="image-20210812212159567"></p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812212222053.png" alt="image-20210812212222053"></p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812212237105.png" alt="image-20210812212237105"></p>
<h3 id="MainActivity-h"><a href="#MainActivity-h" class="headerlink" title="MainActivity.h"></a>MainActivity.h</h3><p>把<code>MainActivity.h</code>更名 拖入<code>jni</code>文件夹</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812212436486.png" alt="image-20210812212436486"></p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812212509913.png" alt="image-20210812212509913"></p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812212536201.png" alt="image-20210812212536201"></p>
<h3 id="一个-c文件两个-mk文件"><a href="#一个-c文件两个-mk文件" class="headerlink" title="一个.c文件两个.mk文件"></a>一个<code>.c</code>文件两个<code>.mk</code>文件</h3><p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812212736407.png" alt="image-20210812212736407"></p>
<p><code>.c</code>文件的头文件进行调用<code>.h</code>文件</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812212900421.png" alt="image-20210812212900421"></p>
<h3 id="写函数"><a href="#写函数" class="headerlink" title="写函数"></a>写函数</h3><p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812213322630.png" alt="image-20210812213322630"></p>
<p>返回值 参数 方法体 三个类型</p>
<p>只有两个参数</p>
<p>补充参数</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812213555345.png" alt="image-20210812213555345"></p>
<p>回显内容：return</p>
<p>目的：c层返回一个字符串给java层</p>
<p>借助JNI接口<code>NewStringUTF</code></p>
<p>查万能表</p>
<pre class="line-numbers language-none"><code class="language-none">jstring     (*NewStringUTF)(JNIEnv*, const char*);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>返回的是一个字符串 使用str接收</p>
<p>使用JNI指针类型指出</p>
<pre class="line-numbers language-none"><code class="language-none">jstring str = *aaa-&gt;NewStringUTF(JNIEnv*, const char*);
return bbb;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<p>需要使用的话还需要定义一个参数，不然 return的返回值 bbb无法从C层回到java层</p>
<p>bbb是个字符串，那么可以使用str，接受后使用<code>JNI(day)指针类型</code>指出</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210812214033628.png" alt="image-20210812214033628"></p>
<p>然后使用<code>JNIEnv</code>类型去定义参数，再放入返回值</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815191518672.png" alt="image-20210815191518672"></p>
<p>然后再把我们涉及到的两个<code>.mk</code>文件搞过来</p>
<p>Android.mk</p>
<pre class="line-numbers language-Android.mk" data-language="Android.mk"><code class="language-Android.mk">LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := JNI_Aaa #模块名称
LOCAL_SRC_FILES := JNI_Aaa.c #源文件
LOCAL_ARM_MODE := arm #编译后的指令集arm
LOCAL_LDLIBS += -llog #依赖库
include $(BUILD_SHARED_LIBRARY) #指定的编译文件类型<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>注：我们之前要编译的是EXE文件类型 所以使用的是：<code>include $(BUILD_HARED_LIBRARY)</code></p>
<p>今天编译的是so库，所以使用的是：<code>include $(BUILD_SHARED_LIBRARY)</code></p>
<p>Application.mk</p>
<pre class="line-numbers language-none"><code class="language-none">APP_ABI := x86 armeabi-v7a<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>







<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815160334982.png" alt="image-20210815160334982"></p>
<h3 id="中文乱码问题"><a href="#中文乱码问题" class="headerlink" title="中文乱码问题"></a>中文乱码问题</h3><p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815160707180.png" alt="image-20210815160707180"></p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815160645969.png" alt="image-20210815160645969"></p>
<p>修改为UTF-8即可</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815160752476.png" alt="image-20210815160752476"></p>
<p>全部保存后进行编译</p>
<h3 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h3><p>去jni包所在的目录</p>
<p>进行编译</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815191635145.png" alt="image-20210815191635145"></p>
<p>Eclipse进行刷新(F5)</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815174729793.png" alt="image-20210815174729793"></p>
<p><code>so库</code>文件在obj目录下</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815191711492.png" alt="image-20210815191711492"></p>
<p>我们的返回值<code>bbb</code>在obj的目录下</p>
<p>那么回到java层 把返回值 带回来即可</p>
<pre class="line-numbers language-none"><code class="language-none">static{
		 System.loadLibrary("JNI_Aaa");
}	<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815192927593.png" alt="image-20210815192927593"></p>
<p>然后编译输出</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815193008141.png" alt="image-20210815193008141"></p>
<h2 id="静态注册-二"><a href="#静态注册-二" class="headerlink" title="静态注册(二)"></a>静态注册(二)</h2><p>继续</p>
<h3 id="定义俩个字段"><a href="#定义俩个字段" class="headerlink" title="定义俩个字段"></a>定义俩个字段</h3><p>在主类中写入</p>
<pre class="line-numbers language-none"><code class="language-none">public String aa1 = "我是aa1";
public static String aa2 = "我是静态aa2";<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815200221139.png" alt="image-20210815200221139"></p>
<p>第一个是普通字段 第二个是静态字段</p>
<h3 id="定义两个方法"><a href="#定义两个方法" class="headerlink" title="定义两个方法"></a>定义两个方法</h3><pre class="line-numbers language-none"><code class="language-none">public native CharSequence Getaa1();
public native CharSequence Getaa2();<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815200444694.png" alt="image-20210815200444694"></p>
<h3 id="Toast来调用写入的字段"><a href="#Toast来调用写入的字段" class="headerlink" title="Toast来调用写入的字段"></a>Toast来调用写入的字段</h3><pre class="line-numbers language-none"><code class="language-none">Toast.makeText(this,Getaa1(),Toast.LENGTH_SHORT).show();
Toast.makeText(this,Getaa2(),Toast.LENGTH_SHORT).show();<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>





<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815200626794.png" alt="image-20210815200626794"></p>
<h3 id="生成-h文件"><a href="#生成-h文件" class="headerlink" title="生成.h文件"></a>生成<code>.h</code>文件</h3><p>获取src目录</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815201401074.png" alt="image-20210815201401074"></p>
<pre class="line-numbers language-none"><code class="language-none">D:\data\aaa\src<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>获取完整路径</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815201452994.png" alt="image-20210815201452994"></p>
<pre class="line-numbers language-none"><code class="language-none">com.example.aaa.MainActivity<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>生成</p>
<pre class="line-numbers language-none"><code class="language-none">javah -encoding UTF-8 -jni com.example.aaa.MainActivity<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815201621218.png" alt="image-20210815201621218"></p>
<p>编码问题</p>
<p>加上<code>-encoding UTF-8</code>即可</p>
<p>F5刷新</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815201729174.png" alt="image-20210815201729174"></p>
<p>改名 丢到jni目录下</p>
<p>把之前的删除了。。</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815201847134.png" alt="image-20210815201847134"></p>
<p>改名</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815201923978.png" alt="image-20210815201923978"></p>
<h3 id="修改-c文件-gt-普通字段"><a href="#修改-c文件-gt-普通字段" class="headerlink" title="修改.c文件->普通字段"></a>修改.c文件-&gt;普通字段</h3><p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210816115732747.png" alt="image-20210816115732747"></p>
<p>构建参数：<code>ccc</code>，然后写方法体内容</p>
<p>获取普通字段方法需要用到JNI接口中的：<code>Getobjectfield</code></p>
<h3 id="查万能表"><a href="#查万能表" class="headerlink" title="查万能表"></a>查万能表</h3><pre class="line-numbers language-none"><code class="language-none">jobject (*GetObjectField)(JNIEnv*, jobject, jfieldID);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>进行定义变量 接收获取到的字符串</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210816115830318.png" alt="image-20210816115830318"></p>
<p>参数<code>jfieldID</code>获取要用到方法：<code>GetFieldID</code></p>
<h3 id="查万能表-1"><a href="#查万能表-1" class="headerlink" title="查万能表"></a>查万能表</h3><pre class="line-numbers language-none"><code class="language-none">jfieldID (*GetFieldID)(JNIEnv*, jclass, const char*, const char*);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>第三个参数就是字段变量名，去java层找的变量</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815203326051.png" alt="image-20210815203326051"></p>
<p>这里就是：aa1</p>
<p>第四个参数是返回值类型，因为第三个参数是 string类型定义的</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815203259731.png" alt="image-20210815203259731"></p>
<pre class="line-numbers language-none"><code class="language-none">java.lang.String<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>那么在C里面写法是不一样的：应该加上L：开头是Smali代码写法</p>
<pre class="line-numbers language-none"><code class="language-none">"Ljava/lang/String"<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210816115945138.png" alt="image-20210816115945138"></p>
<p>然后看第二个参数：jclass</p>
<p>需要JNI中的Findclass进行返回</p>
<h3 id="查万能表-2"><a href="#查万能表-2" class="headerlink" title="查万能表"></a>查万能表</h3><pre class="line-numbers language-none"><code class="language-none">jclass (*FindClass)(JNIEnv*, const char*);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>用变量：ccc指出</p>
<p>第二个参数：<code>const char*</code>是类的路径</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210815204114116.png" alt="image-20210815204114116"></p>
<pre class="line-numbers language-none"><code class="language-none">com.example.aaa.MainActivity<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>继续变换为C语言的写法 把<code>.</code>换成<code>/</code></p>
<pre class="line-numbers language-none"><code class="language-none">"com/example/dayuanquan/MainActivity"<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210816120042455.png" alt="image-20210816120042455"></p>
<h3 id="return"><a href="#return" class="headerlink" title="return"></a>return</h3><p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210816120119718.png" alt="image-20210816120119718"></p>
<p>完整代码如下</p>
<pre class="line-numbers language-none"><code class="language-none">JNIEXPORT jobject JNICALL Java_com_example_aaa_MainActivity_Getaa1
  (JNIEnv *ccc, jobject obj){
	
	jclass jclass=(*ccc)-&gt;FindClass(ccc, "com/example/dayuanquan/MainActivity");
	jfieldID jfieldID=(*ccc)-&gt;GetFieldID(ccc, jclass, "aa1", "Ljava/lang/String;");
	jobject str1=(*ccc)-&gt;GetObjectField(ccc, obj, jfieldID);
	
	return str1;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="修改-C文件-gt-静态字段"><a href="#修改-C文件-gt-静态字段" class="headerlink" title="修改.C文件->静态字段"></a>修改<code>.C</code>文件-&gt;静态字段</h3><p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210816120347923.png" alt="image-20210816120347923"></p>
<h3 id="查万能表-3"><a href="#查万能表-3" class="headerlink" title="查万能表"></a>查万能表</h3><p>获取静态字段要用：<code>GetStaticObjectField</code></p>
<p>查万能表可知：</p>
<pre class="line-numbers language-none"><code class="language-none">jobject (*GetStaticObjectField)(JNIEnv*, jclass, jfieldID);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210816120813683.png" alt="image-20210816120813683"></p>
<h3 id="查万能表-4"><a href="#查万能表-4" class="headerlink" title="查万能表"></a>查万能表</h3><p>参数<code>jfieldID2</code>获取要用到方法：<code>GetFieldID</code></p>
<pre class="line-numbers language-none"><code class="language-none">jfieldID (*GetStaticFieldID)(JNIEnv*, jclass, const char*,const char*);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210816121149517.png" alt="image-20210816121149517"></p>
<h3 id="查万能表-5"><a href="#查万能表-5" class="headerlink" title="查万能表"></a>查万能表</h3><pre class="line-numbers language-none"><code class="language-none">jclass (*FindClass)(JNIEnv*, const char*);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>用变量：ccc指出</p>
<p>第二个参数：<code>const char*</code>是类的路径</p>
<p>和普通字段一样 改一下参数即可</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210816121322887.png" alt="image-20210816121322887"></p>
<h3 id="return-1"><a href="#return-1" class="headerlink" title="return"></a>return</h3><p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210816121416623.png" alt="image-20210816121416623"></p>
<h3 id="编译-1"><a href="#编译-1" class="headerlink" title="编译"></a>编译</h3><p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210816121543738.png" alt="image-20210816121543738"></p>
<p>注：没有小告警的生成是因为</p>
<p>在<code>Application.mk</code>中定义Android的版本即可</p>
<pre class="line-numbers language-none"><code class="language-none">APP_PLATFORM := android-8<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210816121612815.png" alt="image-20210816121612815"></p>
<p>F5刷新项目</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210816121815890.png" alt="image-20210816121815890"></p>
<p>最后 记得在Java层写下 引导</p>
<p><img src="%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0(%E5%85%AD).assets/image-20210816121844579.png" alt="image-20210816121844579"></p>
<p>OK 就到这里</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">每天都要努力哇</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://Redamancy404.github.io/2021/10/28/an-zhuo-xue-xi-liu/">http://Redamancy404.github.io/2021/10/28/an-zhuo-xue-xi-liu/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">每天都要努力哇</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0-%E5%85%AD/">
                                    <span class="chip bg-color">安卓学习(六)</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2021/10/28/an-zhuo-xue-xi-ba/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/6.jpg" class="responsive-img" alt="安卓学习(八)">
                        
                        <span class="card-title">安卓学习(八)</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            分享者才是学习中最大的受益者！
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-10-28
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97/" class="post-category">
                                    安卓学习系列
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0-%E5%85%AB/">
                        <span class="chip bg-color">安卓学习(八)</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/10/28/an-zhuo-xue-xi-si/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/6.jpg" class="responsive-img" alt="安卓学习(四)">
                        
                        <span class="card-title">安卓学习(四)</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            分享者才是学习中最大的受益者！
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-10-28
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97/" class="post-category">
                                    安卓学习系列
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0-%E5%9B%9B/">
                        <span class="chip bg-color">安卓学习(四)</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2021</span>
            
            <a href="/about" target="_blank">每天都要努力哇</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/Redamancy404/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                        class="white-color">179.6k</span>
            
            
            
            
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link ">
    <a href="https://github.com/Redamancy404" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1181062873@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1181062873" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1181062873" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body>

</html>
